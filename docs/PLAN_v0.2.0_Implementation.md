# Clouvel v0.2.0 로드맵 + 구현 플랜

> **대상**: Claude Code CLI
> **버전**: v0.2.0 - 컨텍스트 유지 + Analytics
> **상태**: 계획됨
> **작성일**: 2026-01-17

---

## 목표

### 해결하는 고통
"왜 이렇게 짰는지 기억 안 남" - 바이브 코딩의 핵심 문제

### 현재 상태 (v0.1.x)
- MVP 완료
- 기본 9개 도구 구현됨
- `get_analytics` 완료

### 이번 버전 목표
3개 도구 추가: `save_context`, `restore_context`, `get_handoff`

---

## 트리플 관점 적용 (PM + CTO + CDO)

### 역할 정의

| 관점 | 비중 | 핵심 질문 |
|------|------|----------|
| **PM (수익)** | 33% | "고객이 원하나?", "돈 되나?", "우선순위 맞나?" |
| **CTO (개발)** | 33% | "확장 가능?", "기술 부채?", "레이저 아닌가?" |
| **CDO (디자인)** | 33% | "AI 티 나나?", "사용자 경험?", "일관성 있나?" |

### 모든 기능/결정에 적용

```
새 기능 제안 시:
├── PM 체크
│   ├── 고객 문제 해결하나?
│   ├── 돈 내고 쓸까?
│   └── MVP에 필요한가?
├── CTO 체크
│   ├── 가장 단순한 방법인가?
│   ├── 며칠 내 구현 가능?
│   └── 레이저 테스트 통과?
└── CDO 체크
    ├── AI 티 나나? (필수)
    ├── 사용자 여정 매끄러운가?
    └── 디자인 시스템 일관성?
```

### 충돌 시 타이브레이커

| 상황 | 우선순위 | 이유 |
|------|---------|------|
| 수익 직접 영향 | PM > CTO > CDO | 생존 우선 |
| 보안/구조 위험 | CTO > PM > CDO | 안전 우선 |
| 사용자 첫인상 | CDO > PM > CTO | 전환율 = 수익 |
| MVP 출시 | PM > CDO > CTO | 속도 우선, 단 AI 티 최소화 |
| 확실하지 않음 | 일단 출시 → 개선 | 피드백 기반 |

---

## CDO 프레임워크: AI 티 벗기기

### 적용 범위

| 영역 | 체크 항목 | Clouvel 도구 |
|------|----------|-------------|
| **CLI/터미널** | 출력 포맷, 이모지, 에러 메시지 | 모든 도구 |
| **웹 UI** | 레이아웃, 색상, 타이포 | `can_design` |
| **문서** | README, 랜딩페이지 | 수동 체크 |

### AI 티 판별 체크리스트

#### 타이포그래피
```
❌ AI 티: Inter, Roboto 단독, 보수적 웨이트
✅ 벗기기: 개성 있는 폰트 조합, 극단적 웨이트 대비
```

#### 색상
```
❌ AI 티: 보라/인디고 그라데이션, bg-indigo-500
✅ 벗기기: 따뜻한 대지색, 단색 + 단일 악센트
```

#### 레이아웃
```
❌ AI 티: 중앙 히어로 + 3열 카드 그리드, 좌우 대칭
✅ 벗기기: 비대칭 (60/40), 매거진 스타일
```

#### CLI/터미널
```
❌ AI 티: 장황한 출력, 이모지 과다, 에러 시 비난 톤
✅ 벗기기: 스캔 가능한 구조, 일관된 이모지, 해결책 제시
```

### Clouvel 이모지 시스템 (CLI 표준)

| 이모지 | 의미 | 사용 |
|--------|------|------|
| ✅ | 성공/완료 | 작업 완료 |
| ❌ | 실패/에러 | 오류 발생 |
| ⚠️ | 경고/주의 | 잠재적 문제 |
| 💡 | 팁/힌트 | 다음 행동 제안 |
| 📁 | 파일/경로 | 파일 위치 |
| 📝 | 내용/요약 | 텍스트 정보 |
| 📌 | 결정/고정 | 중요 결정 |
| 📋 | 목록/할일 | 다음 단계 |
| 🔄 | 복원/동기화 | 상태 변경 |
| 📅 | 날짜/시간 | 타임스탬프 |
| 📚 | 목록/아카이브 | 여러 항목 |
| 📭 | 비어있음 | 데이터 없음 |

### CLI 출력 구조 표준

```
[이모지] [제목]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[핵심 정보 - 1-2줄]

[상세 정보 - 필요시]
  • 항목 1
  • 항목 2

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 [다음 행동 제안]
```

### 에러 메시지 원칙

```
❌ 나쁜 예:
"Error: Invalid parameter 'date' - expected ISO 8601 format"

✅ 좋은 예:
"❌ 날짜 형식이 맞지 않아요
   입력: 01-17-2026
   필요: YYYY-MM-DD (예: 2026-01-17)

💡 다시 시도: restore_context(date=\"2026-01-17\")"
```

---

## /review 커맨드 스펙

### 호출 방식

```bash
/review pm cto      # PM+CTO (기능+기술 검토)
/review pm cdo      # PM+CDO (기능+디자인 검토)
/review cto cdo     # CTO+CDO (기술+디자인 검토)
/review all         # 전체 (PM+CTO+CDO)
/review             # 기본값 = all
```

### 각 관점 체크리스트

#### PM 체크 항목
```yaml
고객:
  - 고객 문제 명확한가?
  - 타겟 페르소나 정의됐나?
수익:
  - 수익 모델 있나?
  - 가격 검증했나?
우선순위:
  - MVP 범위 맞나?
  - 경쟁사 분석했나?
```

#### CTO 체크 항목
```yaml
아키텍처:
  - 가장 단순한 방법인가?
  - 며칠 내 구현 가능한가?
품질:
  - 레이저 테스트 통과?
  - 기술 부채 감당 가능?
검증:
  - AC (수락 기준) 있나?
  - DoD (완료 정의) 명확?
```

#### CDO 체크 항목
```yaml
AI 티:
  - 타이포: Inter/Roboto 단독 아닌가?
  - 색상: 보라 그라데이션 아닌가?
  - 레이아웃: 3열 카드 그리드 아닌가?
UX:
  - 사용자 여정 매끄러운가?
  - 에러 시 다음 행동 명확?
일관성:
  - 디자인 시스템 따르나?
  - 이모지/아이콘 일관적?
```

### 사용 시점 가이드

| 상황 | 추천 조합 |
|------|----------|
| 새 기능 기획 | `/review pm cto` |
| UI/화면 작업 | `/review pm cdo` 또는 `/review cto cdo` |
| 구현 완료 후 | `/review cto cdo` |
| 출시 전 최종 | `/review all` |

---

## 구현할 도구 상세

### 1. save_context

**목적**: 세션 종료 시 작업 컨텍스트 저장

**입력 파라미터**:
```python
{
    "summary": str,           # 필수 - 작업 요약 (1-3문장)
    "decisions": list[str],   # 선택 - 결정 사항 목록
    "next_steps": list[str],  # 선택 - 다음 할 일
    "warnings": list[str],    # 선택 - 주의사항
    "tags": list[str]         # 선택 - 검색용 태그
}
```

**저장 위치**: `.clouvel/context/{timestamp}.json`

**저장 형식**:
```json
{
    "timestamp": "2026-01-17T10:30:00",
    "summary": "PRD 작성 완료, 기술 설계 검토 중",
    "decisions": [
        "FastAPI 대신 Flask 선택 - 단순함 우선",
        "PostgreSQL → SQLite로 변경 - MVP이므로"
    ],
    "next_steps": [
        "API 엔드포인트 구현",
        "테스트 코드 작성"
    ],
    "warnings": [
        "auth 모듈 아직 미완성 - 건드리지 말 것"
    ],
    "tags": ["prd", "flask", "mvp"],
    "project": "clouvel",
    "version": "0.2.0"
}
```

**출력**:
```
✅ 컨텍스트 저장 완료
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📁 위치: .clouvel/context/2026-01-17_103000.json
📝 요약: PRD 작성 완료, 기술 설계 검토 중
📌 결정: 2개
📋 다음: 2개
⚠️ 주의: 1개
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 세션 복원: restore_context 호출
```

---

### 2. restore_context

**목적**: 이전 세션 컨텍스트 복원

**입력 파라미터**:
```python
{
    "date": str,      # 선택 - 특정 날짜 (YYYY-MM-DD), 없으면 최신
    "tag": str,       # 선택 - 태그로 검색
    "list_only": bool # 선택 - 목록만 표시 (기본 False)
}
```

**동작**:
1. `list_only=True`: 저장된 컨텍스트 목록 표시
2. `date` 지정: 해당 날짜의 최신 컨텍스트 로드
3. 파라미터 없음: 가장 최근 컨텍스트 로드

**출력 (복원 시)**:
```
🔄 컨텍스트 복원
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📅 저장일: 2026-01-17 10:30
📝 요약: PRD 작성 완료, 기술 설계 검토 중

📌 결정 사항:
  • FastAPI 대신 Flask 선택 - 단순함 우선
  • PostgreSQL → SQLite로 변경 - MVP이므로

📋 다음 할 일:
  • API 엔드포인트 구현
  • 테스트 코드 작성

⚠️ 주의사항:
  • auth 모듈 아직 미완성 - 건드리지 말 것
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**출력 (목록 시)**:
```
📚 저장된 컨텍스트 목록
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 2026-01-17 10:30 - PRD 작성 완료, 기술 설계 검토 중
2. 2026-01-16 15:20 - API 구현 50% 완료
3. 2026-01-15 09:00 - 프로젝트 초기 설정
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 복원: restore_context(date="2026-01-16")
```

---

### 3. get_handoff

**목적**: /clear 전 Boris 방식 핸드오프 문서 생성

**입력 파라미터**:
```python
{
    "task": str,              # 필수 - 현재 작업
    "intent": str,            # 필수 - 의도/목적
    "current_state": str,     # 필수 - 현재 상태
    "blockers": list[str],    # 선택 - 막힌 부분
    "next_actions": list[str] # 선택 - 다음 액션
}
```

**출력**:
```
📋 핸드오프 문서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 작업
save_context 도구 구현

## 의도
세션 간 컨텍스트 유지로 "왜 이렇게 짰지?" 문제 해결

## 현재 상태
- 파라미터 정의 완료
- 저장 로직 80% 구현
- 테스트 미작성

## 막힌 부분
- 타임스탬프 포맷 결정 필요 (ISO vs Unix)

## 다음 액션
1. 타임스탬프 ISO 형식으로 확정
2. 저장 로직 완료
3. 단위 테스트 작성

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 이 내용을 /clear 후 새 세션에 붙여넣기
```

---

## 기술 요구사항

### 파일 구조
```
.clouvel/
├── analytics.json      # 기존 (v0.1)
├── context/            # 신규 (v0.2)
│   ├── 2026-01-17_103000.json
│   └── 2026-01-16_152000.json
└── config.json         # 기존
```

### 의존성
- 추가 패키지 없음 (표준 라이브러리만)
- `json`, `datetime`, `pathlib` 사용

### 에러 처리
```python
# 컨텍스트 없을 때
"📭 저장된 컨텍스트가 없습니다. save_context로 먼저 저장하세요."

# 날짜 포맷 오류
"❌ 날짜 형식이 맞지 않아요. YYYY-MM-DD 형식으로 입력하세요. (예: 2026-01-17)"

# 파일 읽기 실패
"⚠️ 컨텍스트 파일을 읽을 수 없습니다: {경로}"
```

---

## 구현 순서

```
1. save_context (Day 1-2)
   ├── 디렉토리 생성 로직
   ├── JSON 저장 로직
   ├── 출력 포맷팅
   └── 단위 테스트

2. restore_context (Day 3-4)
   ├── 파일 목록 조회
   ├── 최신 파일 찾기
   ├── 날짜/태그 필터
   └── 단위 테스트

3. get_handoff (Day 5-6)
   ├── 템플릿 생성
   ├── 마크다운 포맷팅
   └── 단위 테스트

4. 통합 테스트 (Day 7)
   ├── 3개 도구 연동 테스트
   ├── 본인 프로젝트에서 실사용
   └── README 업데이트
```

---

## 완료 조건 (DoD)

### 기능
- [ ] save_context 구현 + 테스트
- [ ] restore_context 구현 + 테스트
- [ ] get_handoff 구현 + 테스트
- [ ] 3개 도구 MCP에 등록

### 품질
- [ ] 단위 테스트 작성
- [ ] 에러 메시지 비전공자 친화적
- [ ] 이모지 + 색상 출력

### 문서
- [ ] README에 새 도구 추가
- [ ] 사용 예시 포함

### 검증
- [ ] 본인 프로젝트에서 3일 이상 사용
- [ ] 컨텍스트 복원 성공률 80%+
- [ ] /handoff → /clear → /verify 워크플로우 테스트

---

## 검증 프로토콜

```
각 도구 완료 후:
1. /handoff - 의도 기록
2. /clear - Context Bias 제거
3. /verify - 새로운 눈으로 검증
4. /gate - typecheck, lint, test
5. 통과 → 커밋
```

---

## 배포 체크리스트

- [ ] 버전 0.2.0으로 업데이트
- [ ] CHANGELOG.md 작성
- [ ] PyPI 배포
- [ ] VS Code 확장 업데이트
- [ ] 트위터 업데이트 공지

---

## 성공 기준 (v0.3 전)

- 컨텍스트 저장/복원 10회 이상 사용
- "왜 이렇게 짰지?" 감소 체감
- 피드백 수집 (있다면)
