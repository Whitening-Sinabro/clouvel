# Clouvel PRD

> PRD ì—†ìœ¼ë©´ ì½”ë”© ì—†ë‹¤.

## í•œ ì¤„ ì •ì˜

ë°”ì´ë¸Œì½”ë”© í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œí•˜ëŠ” MCP ì„œë²„

## í•µì‹¬ ê¸°ëŠ¥

### Free (v1.3)

| ë„êµ¬              | ì„¤ëª…                                               |
| ----------------- | -------------------------------------------------- |
| `can_code`        | ë¬¸ì„œ ê²€ì‚¬ í›„ ì½”ë”© í—ˆìš©/ì°¨ë‹¨                        |
| `start`           | í”„ë¡œì íŠ¸ ì˜¨ë³´ë”©                                    |
| `plan`            | **[NEW]** ìƒì„¸ ì‹¤í–‰ ê³„íš ìƒì„± (ë§¤ë‹ˆì € í”¼ë“œë°± ê¸°ë°˜) |
| `init_planning`   | ì˜ì†ì  ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”                             |
| `update_progress` | ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸                                 |
| `refresh_goals`   | ëª©í‘œ ë¦¬ë§ˆì¸ë“œ                                      |

### Pro

| ë„êµ¬         | ì„¤ëª…                              |
| ------------ | --------------------------------- |
| `manager`    | 8ëª… C-Level ë§¤ë‹ˆì € í˜‘ì—… í”¼ë“œë°±    |
| `ship`       | ì›í´ë¦­ ê²€ì¦ (lint â†’ test â†’ build) |
| `quick_ship` | ë¹ ë¥¸ ê²€ì¦ (lint + test)           |
| `full_ship`  | ì „ì²´ ê²€ì¦ + ìë™ ìˆ˜ì •             |

## íƒ€ê²Ÿ

Claude Code ì‚¬ìš©ì ì¤‘ ë°”ì´ë¸Œì½”ë”© ì´ˆë³´ì

## Acceptance (ì™„ë£Œ ê¸°ì¤€)

### Core

- [x] `can_code` í˜¸ì¶œ ì‹œ PRD ì—†ìœ¼ë©´ BLOCK
- [x] `can_code` í˜¸ì¶œ ì‹œ acceptance ì„¹ì…˜ ì—†ìœ¼ë©´ BLOCK
- [x] `can_code` í˜¸ì¶œ ì‹œ ê¶Œì¥ ë¬¸ì„œ ì—†ìœ¼ë©´ WARN (ì§„í–‰ ê°€ëŠ¥)
- [x] `clouvel setup` ì‹¤í–‰ ì‹œ ê¸€ë¡œë²Œ CLAUDE.mdì— ê·œì¹™ ì¶”ê°€
- [x] `clouvel setup` ì‹¤í–‰ ì‹œ MCP ì„œë²„ ìë™ ë“±ë¡
- [x] Claudeê°€ ì½”ë“œ ì‘ì„± ì „ ìë™ìœ¼ë¡œ `can_code` í˜¸ì¶œ

### v1.3 Plan Tool

- [x] `plan` í˜¸ì¶œ ì‹œ manager í”¼ë“œë°± ìë™ ìˆ˜ì§‘
- [x] ì•¡ì…˜ ì•„ì´í…œì„ Phaseë³„(ì¤€ë¹„/ì„¤ê³„/êµ¬í˜„/ê²€ì¦)ë¡œ ê·¸ë£¹í™”
- [x] ì˜ì¡´ì„± ê¸°ë°˜ í† í´ë¡œì§€ ì •ë ¬
- [x] task_plan.mdì— ìƒì„¸ ê³„íš ì €ì¥
- [x] ê²€ì¦ í¬ì¸íŠ¸ ë° ì™„ë£Œ ì¡°ê±´ í¬í•¨

---

## v1.5 ê¸°ë¡ ê°•í™” + Manager ê°œì„ 

> **ëª¨í† **: "ê¸°ë¡ì„ ìƒì§€ ì•ŠëŠ”ë‹¤" - ì•½ì† ì´í–‰
> **ì›ì¹™**: "ê°•ì œë˜ì§€ ì•ŠëŠ” ë£°ì€ ì¥ì‹ì´ë‹¤"

### ë°°ê²½ (ì™œ í•„ìš”í•œê°€)

ì‹¤ì œ ì‚¬ìš© ì‹œ ë°œìƒí•œ ë¬¸ì œ:
- `files/created.md` ì•ˆ ë§Œë“¦ â†’ íŒŒì¼ ì¶”ì  ë¶ˆê°€
- í…ŒìŠ¤íŠ¸ 0ê°œì¸ë° "âœ… ì™„ë£Œ" ì²˜ë¦¬ â†’ ê±°ì§“ ì™„ë£Œ
- Mockì¸ë° "âœ… ì™„ë£Œ" ì²˜ë¦¬ â†’ DoD ë¬´ì‹œ
- Managerê°€ generic í”¼ë“œë°±ë§Œ ì¤Œ â†’ context ë¬´ì‹œ

**ê·¼ë³¸ ì›ì¸**: ê·œì¹™ë§Œ ìˆê³  ê°•ì œ í¬ì¸íŠ¸ê°€ ì—†ìŒ

### A. ê¸°ë¡ ê¸°ëŠ¥ ê°•í™” (Free)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| A1 | `can_code` í…ŒìŠ¤íŠ¸ ì²´í¬ | `src/**/*.test.*` ì¡´ì¬ ì—¬ë¶€ í™•ì¸, ì—†ìœ¼ë©´ WARN | P0 |
| A2 | `can_code` DoD ì²´í¬ | PRDì— DoD/Acceptance ì„¹ì…˜ ìˆëŠ”ì§€ í™•ì¸ | P0 |
| A3 | pre-commit hook ê°•í™” | `files/created.md` ì¡´ì¬ í™•ì¸, ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨ | P0 |
| A4 | `record_file` ë„êµ¬ | íŒŒì¼ ìƒì„± ì‹œ ìë™ ê¸°ë¡ (Pro) | P1 |

#### A1. can_code í…ŒìŠ¤íŠ¸ ì²´í¬

```python
def can_code():
    check_prd()           # ê¸°ì¡´
    check_tests_exist()   # ì‹ ê·œ: src/**/*.test.* ì¡´ì¬?
    # ì—†ìœ¼ë©´ WARN: "í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„± í›„ ì§„í–‰í•˜ì„¸ìš”."
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] `src/` ë˜ëŠ” `tests/` í´ë”ì— `*.test.*` ë˜ëŠ” `*.spec.*` íŒŒì¼ ì¡´ì¬ í™•ì¸
- [x] ì—†ìœ¼ë©´ WARN (BLOCK ì•„ë‹˜ - ì´ˆê¸° ê°œë°œ í—ˆìš©)
- [x] í…ŒìŠ¤íŠ¸ ê°œìˆ˜ í‘œì‹œ (ì˜ˆ: "3 tests found")

#### A2. can_code DoD ì²´í¬

```python
def can_code():
    check_prd()
    check_dod_section()   # ì‹ ê·œ: PRDì— DoD ì„¹ì…˜ ìˆëŠ”ì§€?
    # ì—†ìœ¼ë©´ WARN: "DoD(ì™„ë£Œ ê¸°ì¤€)ê°€ ì—†ìŠµë‹ˆë‹¤."
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] PRDì—ì„œ `## Acceptance`, `## DoD`, `## ì™„ë£Œ ê¸°ì¤€` ì„¹ì…˜ ê²€ìƒ‰
- [x] ì—†ìœ¼ë©´ BLOCK (criticalì´ë¯€ë¡œ WARN â†’ BLOCK)
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ (`- [ ]`) ê°œìˆ˜ í‘œì‹œ (ë¯¸êµ¬í˜„ - í–¥í›„ ì¶”ê°€)

#### A3. pre-commit hook ê°•í™”

```bash
# .claude/hooks/pre-commit
if [ ! -f ".claude/files/created.md" ]; then
  echo "âŒ .claude/files/created.mdê°€ ì—†ìŠµë‹ˆë‹¤."
  echo "íŒŒì¼ ìƒì„± ê¸°ë¡ì„ ë¨¼ì € ì‘ì„±í•˜ì„¸ìš”."
  exit 1
fi
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] `clouvel setup --hooks` ì‹¤í–‰ ì‹œ pre-commit hook ì„¤ì¹˜
- [x] `files/created.md` ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨
- [x] `current.md` ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨

### B. Manager ê°œì„  (Pro)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| B1 | í† í”½ í™•ì¥ | mcp, clouvel, internal í† í”½ ì¶”ê°€ | P1 |
| B2 | Context ë¶„ì„ ê°•í™” | í‚¤ì›Œë“œ + ë¬¸ì¥ êµ¬ì¡° ë¶„ì„ | P1 |
| B3 | ë™ì  í”¼ë“œë°± ê°œì„  | í…œí”Œë¦¿ â†’ context ë°˜ì˜ í”¼ë“œë°± | P2 |

#### B1. í† í”½ í™•ì¥

```python
# utils.py - topic_keywords í™•ì¥
topic_keywords = {
    # ê¸°ì¡´...
    "mcp": ["mcp", "server", "tool", "clouvel", "claude", "anthropic"],
    "internal": ["ìš°ë¦¬", "ìì²´", "ê°œì„ ", "ë³´ê°•", "ëˆ„ë½", "ì•½ì†"],
    "tracking": ["ê¸°ë¡", "ì¶”ì ", "files", "created", "current"],
}
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] "Clouvel ê¸°ëŠ¥ ê°œì„ " context â†’ "mcp" + "internal" í† í”½ ê°ì§€
- [x] í•´ë‹¹ í† í”½ì— ë§ëŠ” ë§¤ë‹ˆì € í”¼ë“œë°± ìƒì„± (CONTEXT_GROUPSì— mcp, internal, tracking, maintenance ì¶”ê°€)

#### B2. Context ë¶„ì„ ê°•í™”

```python
def _analyze_context(context: str) -> List[str]:
    # 1. í‚¤ì›Œë“œ ë§¤ì¹­ (ê¸°ì¡´)
    detected = _keyword_matching(context)

    # 2. ë¬¸ì¥ íŒ¨í„´ ë¶„ì„ (ì‹ ê·œ)
    if "~ê°€ ì—†ë‹¤" in context or "ëˆ„ë½" in context:
        detected.append("missing")
    if "ê°•ì œ" in context or "ì²´í¬" in context:
        detected.append("enforcement")

    return detected
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] ë¬¸ì œ ìƒí™© íŒ¨í„´ ê°ì§€ ("ì—†ë‹¤", "ì•ˆ ë¨", "ëˆ„ë½", "ëŠë ¤", "ì·¨ì•½")
- [x] ìš”ì²­ íŒ¨í„´ ê°ì§€ ("ì¶”ê°€", "êµ¬í˜„", "ìˆ˜ì •", "í…ŒìŠ¤íŠ¸")
- [x] ê°ì§€ëœ íŒ¨í„´ì— ë§ëŠ” í”¼ë“œë°± ìƒì„± (CONTEXT_GROUPS ë§¤í•‘)

#### B3. ë™ì  í”¼ë“œë°± ê°œì„ 

**í˜„ì¬ ë¬¸ì œ:**
```
context: "Clouvel íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ì´ ì—†ì–´ì„œ ë¬¸ì œ"
â†’ ê°ì§€: api, feature
â†’ ì¶œë ¥: "API ì—”ë“œí¬ì¸íŠ¸ë¥¼ PRDì— ëª…ì‹œí•˜ì„¸ìš”" (ê´€ë ¨ ì—†ìŒ)
```

**ê°œì„  í›„:**
```
context: "Clouvel íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ì´ ì—†ì–´ì„œ ë¬¸ì œ"
â†’ ê°ì§€: mcp, internal, tracking, missing
â†’ ì¶œë ¥: "íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ êµ¬í˜„ ì‹œ ê³ ë ¤ì‚¬í•­..." (ê´€ë ¨ ìˆìŒ)
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] context ë‚´ìš©ì´ í”¼ë“œë°±ì— ë°˜ì˜ë¨ (íŒ¨í„´ ê°ì§€ â†’ í† í”½ â†’ ë§¤ë‹ˆì € ë§¤í•‘)
- [x] generic í…œí”Œë¦¿ ëŒ€ì‹  ë§ì¶¤ í”¼ë“œë°± (XML êµ¬ì¡°í™” + bookending)
- [x] LLM ì£¼ì˜ë ¥ ìµœì í™” (U-shaped curve: ì²˜ìŒ+ëì— critical issues)
- [ ] ì´ì „ ê²°ì •(Knowledge Base) ì°¸ì¡°

---

### êµ¬í˜„ ìˆœì„œ

| Phase | í•­ëª© | ì˜ˆìƒ |
|-------|------|------|
| 1 | A1, A2 (can_code ê°•í™”) | 1ì¼ |
| 2 | A3 (pre-commit hook) | 0.5ì¼ |
| 3 | B1 (í† í”½ í™•ì¥) | 0.5ì¼ |
| 4 | B2, B3 (Manager ê°œì„ ) | 2ì¼ |
| 5 | A4 (record_file) | 1ì¼ |

**ì´ ì˜ˆìƒ**: 5ì¼

---

### í•˜ìœ„ í˜¸í™˜ì„±

- ê¸°ì¡´ ì‚¬ìš©ì: ìƒˆ ì²´í¬ëŠ” WARNë§Œ (BLOCK ì•„ë‹˜)
- ì‹ ê·œ ì‚¬ìš©ì: strict ëª¨ë“œ ì˜µì…˜ ì œê³µ
- `clouvel setup --strict`: ëª¨ë“  ì²´í¬ BLOCKìœ¼ë¡œ ì „í™˜

---

## v1.7 ë²„ê·¸ ìˆ˜ì • + ê²€ì¦ ì›Œí¬í”Œë¡œìš°

> **ë°œê²¬ì¼**: 2026-01-25
> **ê·¼ë³¸ ì›ì¸**: í…ŒìŠ¤íŠ¸ë§Œ í•˜ê³  ê²€ì¦ ì•ˆ í•¨. ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ëˆ„ë½.

### ë°œê²¬ëœ ë¬¸ì œ

| # | ë¬¸ì œ | ì›ì¸ | ì˜í–¥ë„ | ìš°ì„ ìˆœìœ„ |
|---|------|------|--------|----------|
| 1 | license_status "Unknown" í‘œì‹œ | license_free.pyì— tier_info ë¯¸ë°˜í™˜ | ë†’ìŒ | **P0** |
| 2 | manager ë™ì  íšŒì˜ ì‘ë™ ì•ˆ í•¨ | uvxì— anthropic ì—†ìŒ + í…œí”Œë¦¿ë§Œ ë°˜í™˜ | ë†’ìŒ | **P0** |
| 3 | ê²€ì¦ ì›Œí¬í”Œë¡œìš° ë¯¸ì •ì˜ | PRDì— handoffâ†’verifyâ†’reviewâ†’gate ì—†ìŒ | ë†’ìŒ | **P1** |
| 4 | review ë„êµ¬ ì—†ìŒ | êµ¬í˜„ ì•ˆ ë¨ | ì¤‘ê°„ | **P1** |
| 5 | verify/gate ì‹¤í–‰ ì•ˆ í•¨ | ì•ˆë‚´ë§Œ í•˜ê³  ì‹¤ì œ ì‹¤í–‰ ì•ˆ í•¨ | ì¤‘ê°„ | **P1** |
| 6 | ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ì—†ìŒ | ë™ê¸°í™” íŒŒì¼ ìŒ(license.pyâ†”license_free.py) ì²´í¬ ì•ˆ í•¨ | ë†’ìŒ | **P1** |
| 7 | í…ŒìŠ¤íŠ¸ â‰  ê²€ì¦ | pytest í†µê³¼í•´ë„ ì‹¤ì œ MCP ì‘ë™ í™•ì¸ ì•ˆ í•¨ | ë†’ìŒ | **P0** |

---

### P0: ì¦‰ì‹œ ìˆ˜ì • (ë°°í¬ ì°¨ë‹¨)

#### 1. license_free.py ë™ê¸°í™”
- [x] tier_info, days_since_activation, premium_unlocked ë°˜í™˜ ì¶”ê°€
- [ ] PyPI ë°°í¬í•˜ì—¬ uvx í™˜ê²½ ë°˜ì˜

#### 2. manager ë™ì  íšŒì˜ ìˆ˜ì •
- [ ] pyproject.tomlì— anthropic optional ì¶”ê°€ (ì™„ë£Œ)
- [ ] MCP ì„¤ì • ë¬¸ì„œì— `--with anthropic` ì•ˆë‚´
- [ ] ë™ì  íšŒì˜ ì‹œ í…œí”Œë¦¿ ëŒ€ì‹  ì‹¤ì œ í”¼ë“œë°± ìƒì„± í™•ì¸
- [ ] í† í° ë‚­ë¹„ ì—†ì´ ê´€ë ¨ ìˆëŠ” í”¼ë“œë°±ë§Œ ìƒì„±

#### 3. ì‹¤ì œ MCP ê²€ì¦ ì ˆì°¨ ì¶”ê°€
- [ ] pytest í›„ ë°˜ë“œì‹œ MCP ë„êµ¬ ìˆ˜ë™ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- [ ] ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¬¸ì„œí™”

---

### P1: ê²€ì¦ ì›Œí¬í”Œë¡œìš° ì •ì˜ ë° êµ¬í˜„

#### ê²€ì¦ ì›Œí¬í”Œë¡œìš° (MUST)

```
ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ
    â†“
handoff(feature, decisions, warnings, next_steps)
    â†“
/clear (ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”)
    â†“
verify(path, scope, checklist)  â† ì‹¤ì œ ì²´í¬ ì‹¤í–‰
    â†“
review(path)  â† ë§¤ë‹ˆì €ë“¤ì´ ì½”ë“œ ë¦¬ë·° [NEW]
    â†“
gate(path, steps, fix)  â† ì‹¤ì œ lint/test/build ì‹¤í–‰
    â†“
ì™„ë£Œ
```

#### 4. verify ë„êµ¬ ê°œì„ 
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª© ìë™ ê²€ì¦ (íŒŒì¼ ì¡´ì¬, í•¨ìˆ˜ êµ¬ì¡° ë“±)
- [ ] PASS/FAIL ê²°ê³¼ ë°˜í™˜
- [ ] ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ì • ì œì•ˆ

#### 5. review ë„êµ¬ ì‹ ê·œ êµ¬í˜„
```python
async def review(path: str, scope: str = "feature") -> list[TextContent]:
    """ë§¤ë‹ˆì €ë“¤ì˜ ì½”ë“œ ë¦¬ë·°

    1. ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ ìˆ˜ì§‘
    2. ê° ë§¤ë‹ˆì € ê´€ì ì—ì„œ ë¦¬ë·°
    3. ë¬¸ì œ ë°œê²¬ ì‹œ ìˆ˜ì • ì œì•ˆ
    """
```

#### 6. gate ë„êµ¬ ê°œì„ 
- [ ] ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ (lint, test, build)
- [ ] ê²°ê³¼ ìˆ˜ì§‘ ë° EVIDENCE.md ìë™ ì—…ë°ì´íŠ¸
- [ ] ì „ì²´ PASS ì‹œì—ë§Œ "ì™„ë£Œ" í—ˆìš©

#### 7. ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ë„êµ¬
```python
async def check_sync(path: str) -> list[TextContent]:
    """ë™ê¸°í™” í•„ìˆ˜ íŒŒì¼ ìŒ ê²€ì¦

    ì²´í¬ ëŒ€ìƒ:
    - license.py â†” license_free.py
    - server.py â†” server_pro.py (ìˆìœ¼ë©´)
    - messages/en.py â†” messages/ko.py (ìˆìœ¼ë©´)

    ê²€ì¦ í•­ëª©:
    - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ì¼ì¹˜
    - ë°˜í™˜ê°’ êµ¬ì¡° ì¼ì¹˜
    """
```

---

### ì™„ë£Œ ê¸°ì¤€ (DoD)

#### P0 ì™„ë£Œ ì¡°ê±´
- [ ] license_status í˜¸ì¶œ ì‹œ Tierê°€ "Personal" í‘œì‹œ
- [ ] manager(use_dynamic=true) í˜¸ì¶œ ì‹œ context ê´€ë ¨ í”¼ë“œë°± ë°˜í™˜
- [ ] pytest í†µê³¼ + MCP ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í†µê³¼

#### P1 ì™„ë£Œ ì¡°ê±´
- [ ] handoff â†’ verify â†’ review â†’ gate ì›Œí¬í”Œë¡œìš° ì‘ë™
- [ ] verifyê°€ ì‹¤ì œ ê²€ì¦ ìˆ˜í–‰ (ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™ í™•ì¸)
- [ ] reviewê°€ ë§¤ë‹ˆì € ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰
- [ ] gateê°€ ì‹¤ì œ lint/test/build ì‹¤í–‰
- [ ] check_syncê°€ ë™ê¸°í™” ë¶ˆì¼ì¹˜ ê°ì§€

---

### ì˜ˆë°©ì±… (ì¬ë°œ ë°©ì§€)

1. **Stub íŒŒì¼ ìˆ˜ì • ì‹œ ë™ê¸°í™” ì²´í¬ í•„ìˆ˜**
   - Primary íŒŒì¼ ìˆ˜ì • â†’ Stub íŒŒì¼ë„ í™•ì¸
   - CIì— check_sync ì¶”ê°€

2. **í…ŒìŠ¤íŠ¸ í›„ ê²€ì¦ í•„ìˆ˜**
   - pytest í†µê³¼ â‰  ì™„ë£Œ
   - MCP ë„êµ¬ ìˆ˜ë™ í˜¸ì¶œ í…ŒìŠ¤íŠ¸ í•„ìˆ˜

3. **ê²€ì¦ ì›Œí¬í”Œë¡œìš° ê°•ì œ**
   - ê¸°ëŠ¥ ì™„ë£Œ ì‹œ handoff â†’ verify â†’ review â†’ gate ìˆœì„œ ê°•ì œ
   - gate í†µê³¼ ì „ ì»¤ë°‹ ì°¨ë‹¨ (pre-commit hook)

---

## v1.8 ì•„í‚¤í…ì²˜ ê°€ë“œ + ê¸ì •ì  í”„ë ˆì´ë°

> **ë°œê²¬ì¼**: 2026-01-26
> **ê·¼ë³¸ ì›ì¸**: ì•„í‚¤í…ì²˜ ê²°ì • ë¯¸ê¸°ë¡ + ë¶€ì •í˜• ê·œì¹™ì˜ ì—­íš¨ê³¼
> **ì—°êµ¬ ê¸°ë°˜**: Wegner (1987) ì‚¬ê³  ì–µì œ, Anthropic/OpenAI ê³µì‹ ê°€ì´ë“œ

### ë°°ê²½ (ì™œ í•„ìš”í•œê°€)

ì‹¤ì œ ì‚¬ìš© ì‹œ ë°œìƒí•œ ë¬¸ì œ:
- manager ë„êµ¬ 2ê³³ì—ì„œ ë‹¤ë¥´ê²Œ ì •ì˜ë¨ â†’ ì¶©ëŒë¡œ ì‘ì—… ë¶ˆê°€
- ì•„í‚¤í…ì²˜ ê²°ì •ì´ ê¸°ë¡ë˜ì§€ ì•ŠìŒ â†’ ì™œ ì´ë ‡ê²Œ ë˜ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŒ
- "~í•˜ì§€ ë§ˆë¼" ê·œì¹™ â†’ ì¸ê°„/AI ëª¨ë‘ ì—­íš¨ê³¼ (ë¨¼ì € ê¸ˆì§€ ëŒ€ìƒ í™œì„±í™”)

**ê·¼ë³¸ ì›ì¸**:
1. "ì–¸ì œ/ë¬´ì—‡ì„" ê¸°ë¡í•´ì•¼ í•˜ëŠ”ì§€ ë¯¸ì •ì˜
2. ê¸°ì¡´ ì½”ë“œ í™•ì¸ ì—†ì´ ìƒˆ ì½”ë“œ ì¶”ê°€ (ìˆ˜ì •ë³´ë‹¤ ì¶”ê°€ê°€ ì¸ì§€ì ìœ¼ë¡œ ì‰¬ì›€)
3. ê·œì¹™ì´ ë¶€ì •í˜• â†’ Pink Elephant Problem

### A. ì•„í‚¤í…ì²˜ ê°€ë“œ (Pro)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| A1 | `arch_check` ë„êµ¬ | ìƒˆ í•¨ìˆ˜/ëª¨ë“ˆ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ê°•ì œ | P0 |
| A2 | Import ê·œì¹™ ê²€ì¦ | server.pyì˜ ì˜ëª»ëœ import íŒ¨í„´ ê°ì§€ | P0 |
| A3 | ì¤‘ë³µ ì •ì˜ ê°ì§€ | ê°™ì€ í•¨ìˆ˜ëª…ì´ ì—¬ëŸ¬ ê³³ì— ì •ì˜ë˜ë©´ ê²½ê³  | P1 |
| A4 | ì•„í‚¤í…ì²˜ ê²°ì • ê°•ì œ ê¸°ë¡ | íŠ¹ì • íŒŒì¼ ìˆ˜ì • ì‹œ record_decision í˜¸ì¶œ ê°•ì œ | P1 |

#### A1. arch_check ë„êµ¬

```python
async def arch_check(
    name: str,           # ì¶”ê°€í•˜ë ¤ëŠ” í•¨ìˆ˜/í´ë˜ìŠ¤ëª…
    purpose: str,        # ëª©ì  ì„¤ëª…
    path: str = "."      # í”„ë¡œì íŠ¸ ê²½ë¡œ
) -> list[TextContent]:
    """ìƒˆ ì½”ë“œ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ í™•ì¸

    1. Knowledge Baseì—ì„œ ê´€ë ¨ ê²°ì • ê²€ìƒ‰
    2. Grepìœ¼ë¡œ ê°™ì€ ì´ë¦„/ë¹„ìŠ·í•œ ê¸°ëŠ¥ ê²€ìƒ‰
    3. ìˆìœ¼ë©´: "ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ê¶Œì¥" + ìœ„ì¹˜
    4. ì—†ìœ¼ë©´: "ì¶”ê°€ ê°€ëŠ¥" + record_location ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] `arch_check("manager", "ë§¤ë‹ˆì € í”¼ë“œë°±")` í˜¸ì¶œ ì‹œ ê¸°ì¡´ ìœ„ì¹˜ ë°˜í™˜
- [ ] ê¸°ì¡´ ì½”ë“œ ìˆìœ¼ë©´ "ìˆ˜ì • ê¶Œì¥", ì—†ìœ¼ë©´ "ì¶”ê°€ ê°€ëŠ¥"
- [ ] ì¶”ê°€ í›„ record_location í˜¸ì¶œ ì•ˆë‚´

#### A2. Import ê·œì¹™ ê²€ì¦

```python
async def check_imports(path: str) -> list[TextContent]:
    """server.pyì˜ import íŒ¨í„´ ê²€ì¦

    ê·œì¹™ (LOCKED #30):
    - âœ… from .tools import xxx
    - âŒ from .tools.manager import xxx
    - âŒ from .tools.manager.core import xxx

    ìœ„ë°˜ ì‹œ ê²½ê³  + ìˆ˜ì • ë°©ë²• ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] server.py ë¶„ì„í•˜ì—¬ tools/xxx/ ì§ì ‘ import ê°ì§€
- [ ] ìœ„ë°˜ ì‹œ WARN + ì˜¬ë°”ë¥¸ import ë°©ë²• ì•ˆë‚´
- [ ] can_codeì— í†µí•© (ì„ íƒì )

#### A3. ì¤‘ë³µ ì •ì˜ ê°ì§€

```python
async def check_duplicates(path: str) -> list[TextContent]:
    """ê°™ì€ í•¨ìˆ˜ëª…ì´ ì—¬ëŸ¬ ê³³ì— ì •ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸

    1. __init__.pyë“¤ì—ì„œ exportëœ í•¨ìˆ˜ëª… ìˆ˜ì§‘
    2. ê°™ì€ ì´ë¦„ì´ 2ê³³ ì´ìƒì´ë©´ ê²½ê³ 
    3. "ë‹¨ì¼ ìœ„ì¹˜ì—ì„œë§Œ export ê·œì¹™" ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] tools/__init__.pyì™€ tools/xxx/__init__.pyì˜ export ë¹„êµ
- [ ] ì¤‘ë³µ ë°œê²¬ ì‹œ ê²½ê³  + ì–´ëŠ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì•ˆë‚´

#### A4. ì•„í‚¤í…ì²˜ ê²°ì • ê°•ì œ ê¸°ë¡

```python
# íŠ¸ë¦¬ê±° íŒŒì¼ ëª©ë¡ (CLAUDE.mdì—ë„ ëª…ì‹œ)
ARCH_TRIGGER_FILES = [
    "server.py",
    "tools/__init__.py",
    "**/core.py",
    "license*.py",
    "api_client.py",
]

# ì´ íŒŒì¼ë“¤ ìˆ˜ì • ì‹œ can_codeê°€ record_decision í˜¸ì¶œ ì•ˆë‚´
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] ARCH_TRIGGER_FILES ìˆ˜ì • ì‹œ "ì•„í‚¤í…ì²˜ ê²°ì • ê¸°ë¡ í•„ìš”" ë©”ì‹œì§€
- [ ] record_decision í˜¸ì¶œ ì˜ˆì‹œ ì œê³µ

---

### B. ê¸ì •ì  í”„ë ˆì´ë° ê°€ì´ë“œ (Free)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| B1 | ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ | ë¶€ì •í˜• â†’ ê¸ì •í˜• ë³€í™˜ ì•ˆë‚´ | P1 |
| B2 | CLAUDE.md ê²€ì‚¬ | ë¶€ì •í˜• ê·œì¹™ ê°ì§€ ë° ë³€í™˜ ì œì•ˆ | P2 |
| B3 | Manager í”¼ë“œë°± ê°œì„  | "~í•˜ì§€ ë§ˆë¼" ëŒ€ì‹  "~í•´ë¼"ë¡œ ì¶œë ¥ | P2 |

#### B1. ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ

```python
NEGATIVE_TO_POSITIVE = {
    "ê¸ˆì§€": "ì‚¬ìš©: {}",
    "í•˜ì§€ ë§ˆë¼": "ëŒ€ì‹ : {}",
    "í”¼í•˜ë¼": "ê¶Œì¥: {}",
    "ì•ˆ ë¨": "ë°©ë²•: {}",
}

def convert_rule(negative_rule: str) -> str:
    """ë¶€ì •í˜• ê·œì¹™ì„ ê¸ì •í˜•ìœ¼ë¡œ ë³€í™˜ ì œì•ˆ"""
```

**ì˜ˆì‹œ:**
| ë¶€ì •í˜• | ê¸ì •í˜• |
|--------|--------|
| "ì¤‘ë³µ ì •ì˜ ê¸ˆì§€" | "ê° í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ìœ„ì¹˜ì—ì„œë§Œ export" |
| "ì§ì ‘ import ê¸ˆì§€" | "server.pyëŠ” tools/__init__.pyì—ì„œ import" |
| "ê¸°ë¡ ì•ˆ í•˜ë©´ ì•ˆ ë¨" | "ì•„í‚¤í…ì²˜ ë³€ê²½ ì‹œ record_decision í˜¸ì¶œ" |

#### B2. CLAUDE.md ê²€ì‚¬

```python
async def check_rules_framing(path: str) -> list[TextContent]:
    """CLAUDE.mdì˜ ê·œì¹™ í”„ë ˆì´ë° ê²€ì‚¬

    1. ë¶€ì •í˜• íŒ¨í„´ ê°ì§€ ("ê¸ˆì§€", "í•˜ì§€ ë§ˆ", "ì•ˆ ë¨", "í”¼í•˜")
    2. ê¸ì •í˜• ë³€í™˜ ì œì•ˆ
    3. ì—°êµ¬ ê·¼ê±° ì•ˆë‚´ (Wegner, Anthropic)
    """
```

---

### ì™„ë£Œ ê¸°ì¤€ (DoD)

#### P0 ì™„ë£Œ ì¡°ê±´
- [ ] arch_check í˜¸ì¶œ ì‹œ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ë™ì‘
- [ ] check_imports í˜¸ì¶œ ì‹œ ì˜ëª»ëœ import ê°ì§€
- [ ] í˜„ì¬ manager ì¶©ëŒ ê°ì§€ë¨

#### P1 ì™„ë£Œ ì¡°ê±´
- [ ] check_duplicatesë¡œ ì¤‘ë³µ ì •ì˜ ê°ì§€
- [ ] ARCH_TRIGGER_FILES ìˆ˜ì • ì‹œ ê¸°ë¡ ì•ˆë‚´
- [ ] ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ ì œê³µ

#### P2 ì™„ë£Œ ì¡°ê±´
- [ ] CLAUDE.md ë¶€ì •í˜• ê·œì¹™ ê°ì§€
- [ ] Manager í”¼ë“œë°±ì´ ê¸ì •í˜•ìœ¼ë¡œ ì¶œë ¥

---

### ê¸°ìˆ  ê²°ì • (Knowledge Base ê¸°ë¡ë¨)

| ID | ê²°ì • | ìƒíƒœ |
|----|------|------|
| #30 | server.pyëŠ” tools/__init__.pyì—ì„œë§Œ import | ğŸ”’ LOCKED |
| #31 | Pro ê¸°ëŠ¥: API ê¶Œí•œ â†’ ë¡œì»¬ ì‹¤í–‰ (ship íŒ¨í„´) | ğŸ”’ LOCKED |
| #32 | Manager ì¶©ëŒ: í†µí•© í•„ìš” | âš ï¸ OPEN |
| #37 | íŒŒì¼ êµ¬ì¡°: xxx.py(ì§„ì…ì ), xxx_pro.py(êµ¬í˜„), xxx/(ë‚´ë¶€) | ğŸ”’ LOCKED |
| #38 | ê·œì¹™ì€ ê¸ì •í˜•ìœ¼ë¡œ ì‘ì„± | ğŸ”’ LOCKED |
| #39 | ì•„í‚¤í…ì²˜ ë³€ê²½ ì‹œ record_decision í˜¸ì¶œ | ğŸ”’ LOCKED |
| #40 | ìƒˆ ì½”ë“œ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ í™•ì¸ | ğŸ”’ LOCKED |

---

### ì—°êµ¬ ê·¼ê±°

**Wegner (1987)**: "í•˜ì–€ ê³° ìƒê° ë§ˆë¼" â†’ ë” ë§ì´ ìƒê°í•¨ (rebound effect, d â‰ˆ 0.30)

**Anthropic ê³µì‹ ë¬¸ì„œ**:
> "Tell Claude what to do instead of what not to do."
> âŒ "Do not use markdown"
> âœ… "Use smoothly flowing prose paragraphs"

**OpenAI Help Center**:
> "Using negative instructions instead of positive framing" - í”¼í•´ì•¼ í•  ì‹¤ìˆ˜ë¡œ ëª…ì‹œ

**íš¨ê³¼ í¬ê¸°**:
- ê¸ì •í˜• ì§€ì‹œ (implementation intentions): medium-to-large effect
- ë¶€ì •í˜• ì§€ì‹œ (thought suppression): rebound effect (d = 0.30)
