# Clouvel PRD

> PRD ì—†ìœ¼ë©´ ì½”ë”© ì—†ë‹¤.

## í•œ ì¤„ ì •ì˜

ë°”ì´ë¸Œì½”ë”© í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œí•˜ëŠ” MCP ì„œë²„

## í•µì‹¬ ê¸°ëŠ¥

### Free (v1.3)

| ë„êµ¬              | ì„¤ëª…                                               |
| ----------------- | -------------------------------------------------- |
| `can_code`        | ë¬¸ì„œ ê²€ì‚¬ í›„ ì½”ë”© í—ˆìš©/ì°¨ë‹¨                        |
| `start`           | í”„ë¡œì íŠ¸ ì˜¨ë³´ë”©                                    |
| `plan`            | **[NEW]** ìƒì„¸ ì‹¤í–‰ ê³„íš ìƒì„± (ë§¤ë‹ˆì € í”¼ë“œë°± ê¸°ë°˜) |
| `init_planning`   | ì˜ì†ì  ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”                             |
| `update_progress` | ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸                                 |
| `refresh_goals`   | ëª©í‘œ ë¦¬ë§ˆì¸ë“œ                                      |

### Pro

| ë„êµ¬         | ì„¤ëª…                              |
| ------------ | --------------------------------- |
| `manager`    | 8ëª… C-Level ë§¤ë‹ˆì € í˜‘ì—… í”¼ë“œë°±    |
| `ship`       | ì›í´ë¦­ ê²€ì¦ (lint â†’ test â†’ build) |
| `quick_ship` | ë¹ ë¥¸ ê²€ì¦ (lint + test)           |
| `full_ship`  | ì „ì²´ ê²€ì¦ + ìë™ ìˆ˜ì •             |

## íƒ€ê²Ÿ

Claude Code ì‚¬ìš©ì ì¤‘ ë°”ì´ë¸Œì½”ë”© ì´ˆë³´ì

## Acceptance (ì™„ë£Œ ê¸°ì¤€)

### Core

- [x] `can_code` í˜¸ì¶œ ì‹œ PRD ì—†ìœ¼ë©´ BLOCK
- [x] `can_code` í˜¸ì¶œ ì‹œ acceptance ì„¹ì…˜ ì—†ìœ¼ë©´ BLOCK
- [x] `can_code` í˜¸ì¶œ ì‹œ ê¶Œì¥ ë¬¸ì„œ ì—†ìœ¼ë©´ WARN (ì§„í–‰ ê°€ëŠ¥)
- [x] `clouvel setup` ì‹¤í–‰ ì‹œ ê¸€ë¡œë²Œ CLAUDE.mdì— ê·œì¹™ ì¶”ê°€
- [x] `clouvel setup` ì‹¤í–‰ ì‹œ MCP ì„œë²„ ìë™ ë“±ë¡
- [x] Claudeê°€ ì½”ë“œ ì‘ì„± ì „ ìë™ìœ¼ë¡œ `can_code` í˜¸ì¶œ

### v1.3 Plan Tool

- [x] `plan` í˜¸ì¶œ ì‹œ manager í”¼ë“œë°± ìë™ ìˆ˜ì§‘
- [x] ì•¡ì…˜ ì•„ì´í…œì„ Phaseë³„(ì¤€ë¹„/ì„¤ê³„/êµ¬í˜„/ê²€ì¦)ë¡œ ê·¸ë£¹í™”
- [x] ì˜ì¡´ì„± ê¸°ë°˜ í† í´ë¡œì§€ ì •ë ¬
- [x] task_plan.mdì— ìƒì„¸ ê³„íš ì €ì¥
- [x] ê²€ì¦ í¬ì¸íŠ¸ ë° ì™„ë£Œ ì¡°ê±´ í¬í•¨

---

## v1.5 ê¸°ë¡ ê°•í™” + Manager ê°œì„ 

> **ëª¨í† **: "ê¸°ë¡ì„ ìƒì§€ ì•ŠëŠ”ë‹¤" - ì•½ì† ì´í–‰
> **ì›ì¹™**: "ê°•ì œë˜ì§€ ì•ŠëŠ” ë£°ì€ ì¥ì‹ì´ë‹¤"

### ë°°ê²½ (ì™œ í•„ìš”í•œê°€)

ì‹¤ì œ ì‚¬ìš© ì‹œ ë°œìƒí•œ ë¬¸ì œ:
- `files/created.md` ì•ˆ ë§Œë“¦ â†’ íŒŒì¼ ì¶”ì  ë¶ˆê°€
- í…ŒìŠ¤íŠ¸ 0ê°œì¸ë° "âœ… ì™„ë£Œ" ì²˜ë¦¬ â†’ ê±°ì§“ ì™„ë£Œ
- Mockì¸ë° "âœ… ì™„ë£Œ" ì²˜ë¦¬ â†’ DoD ë¬´ì‹œ
- Managerê°€ generic í”¼ë“œë°±ë§Œ ì¤Œ â†’ context ë¬´ì‹œ

**ê·¼ë³¸ ì›ì¸**: ê·œì¹™ë§Œ ìˆê³  ê°•ì œ í¬ì¸íŠ¸ê°€ ì—†ìŒ

### A. ê¸°ë¡ ê¸°ëŠ¥ ê°•í™” (Free)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| A1 | `can_code` í…ŒìŠ¤íŠ¸ ì²´í¬ | `src/**/*.test.*` ì¡´ì¬ ì—¬ë¶€ í™•ì¸, ì—†ìœ¼ë©´ WARN | P0 |
| A2 | `can_code` DoD ì²´í¬ | PRDì— DoD/Acceptance ì„¹ì…˜ ìˆëŠ”ì§€ í™•ì¸ | P0 |
| A3 | pre-commit hook ê°•í™” | `files/created.md` ì¡´ì¬ í™•ì¸, ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨ | P0 |
| A4 | `record_file` ë„êµ¬ | íŒŒì¼ ìƒì„± ì‹œ ìë™ ê¸°ë¡ (Pro) | P1 |

#### A1. can_code í…ŒìŠ¤íŠ¸ ì²´í¬

```python
def can_code():
    check_prd()           # ê¸°ì¡´
    check_tests_exist()   # ì‹ ê·œ: src/**/*.test.* ì¡´ì¬?
    # ì—†ìœ¼ë©´ WARN: "í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„± í›„ ì§„í–‰í•˜ì„¸ìš”."
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] `src/` ë˜ëŠ” `tests/` í´ë”ì— `*.test.*` ë˜ëŠ” `*.spec.*` íŒŒì¼ ì¡´ì¬ í™•ì¸
- [x] ì—†ìœ¼ë©´ WARN (BLOCK ì•„ë‹˜ - ì´ˆê¸° ê°œë°œ í—ˆìš©)
- [x] í…ŒìŠ¤íŠ¸ ê°œìˆ˜ í‘œì‹œ (ì˜ˆ: "3 tests found")

#### A2. can_code DoD ì²´í¬

```python
def can_code():
    check_prd()
    check_dod_section()   # ì‹ ê·œ: PRDì— DoD ì„¹ì…˜ ìˆëŠ”ì§€?
    # ì—†ìœ¼ë©´ WARN: "DoD(ì™„ë£Œ ê¸°ì¤€)ê°€ ì—†ìŠµë‹ˆë‹¤."
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] PRDì—ì„œ `## Acceptance`, `## DoD`, `## ì™„ë£Œ ê¸°ì¤€` ì„¹ì…˜ ê²€ìƒ‰
- [x] ì—†ìœ¼ë©´ BLOCK (criticalì´ë¯€ë¡œ WARN â†’ BLOCK)
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ (`- [ ]`) ê°œìˆ˜ í‘œì‹œ (ë¯¸êµ¬í˜„ - í–¥í›„ ì¶”ê°€)

#### A3. pre-commit hook ê°•í™”

```bash
# .claude/hooks/pre-commit
if [ ! -f ".claude/files/created.md" ]; then
  echo "âŒ .claude/files/created.mdê°€ ì—†ìŠµë‹ˆë‹¤."
  echo "íŒŒì¼ ìƒì„± ê¸°ë¡ì„ ë¨¼ì € ì‘ì„±í•˜ì„¸ìš”."
  exit 1
fi
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] `clouvel setup --hooks` ì‹¤í–‰ ì‹œ pre-commit hook ì„¤ì¹˜
- [x] `files/created.md` ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨
- [x] `current.md` ì—†ìœ¼ë©´ ì»¤ë°‹ ì°¨ë‹¨

### B. Manager ê°œì„  (Pro)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| B1 | í† í”½ í™•ì¥ | mcp, clouvel, internal í† í”½ ì¶”ê°€ | P1 |
| B2 | Context ë¶„ì„ ê°•í™” | í‚¤ì›Œë“œ + ë¬¸ì¥ êµ¬ì¡° ë¶„ì„ | P1 |
| B3 | ë™ì  í”¼ë“œë°± ê°œì„  | í…œí”Œë¦¿ â†’ context ë°˜ì˜ í”¼ë“œë°± | P2 |

#### B1. í† í”½ í™•ì¥

```python
# utils.py - topic_keywords í™•ì¥
topic_keywords = {
    # ê¸°ì¡´...
    "mcp": ["mcp", "server", "tool", "clouvel", "claude", "anthropic"],
    "internal": ["ìš°ë¦¬", "ìì²´", "ê°œì„ ", "ë³´ê°•", "ëˆ„ë½", "ì•½ì†"],
    "tracking": ["ê¸°ë¡", "ì¶”ì ", "files", "created", "current"],
}
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] "Clouvel ê¸°ëŠ¥ ê°œì„ " context â†’ "mcp" + "internal" í† í”½ ê°ì§€
- [x] í•´ë‹¹ í† í”½ì— ë§ëŠ” ë§¤ë‹ˆì € í”¼ë“œë°± ìƒì„± (CONTEXT_GROUPSì— mcp, internal, tracking, maintenance ì¶”ê°€)

#### B2. Context ë¶„ì„ ê°•í™”

```python
def _analyze_context(context: str) -> List[str]:
    # 1. í‚¤ì›Œë“œ ë§¤ì¹­ (ê¸°ì¡´)
    detected = _keyword_matching(context)

    # 2. ë¬¸ì¥ íŒ¨í„´ ë¶„ì„ (ì‹ ê·œ)
    if "~ê°€ ì—†ë‹¤" in context or "ëˆ„ë½" in context:
        detected.append("missing")
    if "ê°•ì œ" in context or "ì²´í¬" in context:
        detected.append("enforcement")

    return detected
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] ë¬¸ì œ ìƒí™© íŒ¨í„´ ê°ì§€ ("ì—†ë‹¤", "ì•ˆ ë¨", "ëˆ„ë½", "ëŠë ¤", "ì·¨ì•½")
- [x] ìš”ì²­ íŒ¨í„´ ê°ì§€ ("ì¶”ê°€", "êµ¬í˜„", "ìˆ˜ì •", "í…ŒìŠ¤íŠ¸")
- [x] ê°ì§€ëœ íŒ¨í„´ì— ë§ëŠ” í”¼ë“œë°± ìƒì„± (CONTEXT_GROUPS ë§¤í•‘)

#### B3. ë™ì  í”¼ë“œë°± ê°œì„ 

**í˜„ì¬ ë¬¸ì œ:**
```
context: "Clouvel íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ì´ ì—†ì–´ì„œ ë¬¸ì œ"
â†’ ê°ì§€: api, feature
â†’ ì¶œë ¥: "API ì—”ë“œí¬ì¸íŠ¸ë¥¼ PRDì— ëª…ì‹œí•˜ì„¸ìš”" (ê´€ë ¨ ì—†ìŒ)
```

**ê°œì„  í›„:**
```
context: "Clouvel íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ì´ ì—†ì–´ì„œ ë¬¸ì œ"
â†’ ê°ì§€: mcp, internal, tracking, missing
â†’ ì¶œë ¥: "íŒŒì¼ ì¶”ì  ê¸°ëŠ¥ êµ¬í˜„ ì‹œ ê³ ë ¤ì‚¬í•­..." (ê´€ë ¨ ìˆìŒ)
```

**ì™„ë£Œ ê¸°ì¤€:**
- [x] context ë‚´ìš©ì´ í”¼ë“œë°±ì— ë°˜ì˜ë¨ (íŒ¨í„´ ê°ì§€ â†’ í† í”½ â†’ ë§¤ë‹ˆì € ë§¤í•‘)
- [x] generic í…œí”Œë¦¿ ëŒ€ì‹  ë§ì¶¤ í”¼ë“œë°± (XML êµ¬ì¡°í™” + bookending)
- [x] LLM ì£¼ì˜ë ¥ ìµœì í™” (U-shaped curve: ì²˜ìŒ+ëì— critical issues)
- [ ] ì´ì „ ê²°ì •(Knowledge Base) ì°¸ì¡°

---

### êµ¬í˜„ ìˆœì„œ

| Phase | í•­ëª© | ì˜ˆìƒ |
|-------|------|------|
| 1 | A1, A2 (can_code ê°•í™”) | 1ì¼ |
| 2 | A3 (pre-commit hook) | 0.5ì¼ |
| 3 | B1 (í† í”½ í™•ì¥) | 0.5ì¼ |
| 4 | B2, B3 (Manager ê°œì„ ) | 2ì¼ |
| 5 | A4 (record_file) | 1ì¼ |

**ì´ ì˜ˆìƒ**: 5ì¼

---

### í•˜ìœ„ í˜¸í™˜ì„±

- ê¸°ì¡´ ì‚¬ìš©ì: ìƒˆ ì²´í¬ëŠ” WARNë§Œ (BLOCK ì•„ë‹˜)
- ì‹ ê·œ ì‚¬ìš©ì: strict ëª¨ë“œ ì˜µì…˜ ì œê³µ
- `clouvel setup --strict`: ëª¨ë“  ì²´í¬ BLOCKìœ¼ë¡œ ì „í™˜

---

## v1.7 ë²„ê·¸ ìˆ˜ì • + ê²€ì¦ ì›Œí¬í”Œë¡œìš°

> **ë°œê²¬ì¼**: 2026-01-25
> **ê·¼ë³¸ ì›ì¸**: í…ŒìŠ¤íŠ¸ë§Œ í•˜ê³  ê²€ì¦ ì•ˆ í•¨. ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ëˆ„ë½.

### ë°œê²¬ëœ ë¬¸ì œ

| # | ë¬¸ì œ | ì›ì¸ | ì˜í–¥ë„ | ìš°ì„ ìˆœìœ„ |
|---|------|------|--------|----------|
| 1 | license_status "Unknown" í‘œì‹œ | license_free.pyì— tier_info ë¯¸ë°˜í™˜ | ë†’ìŒ | **P0** |
| 2 | manager ë™ì  íšŒì˜ ì‘ë™ ì•ˆ í•¨ | uvxì— anthropic ì—†ìŒ + í…œí”Œë¦¿ë§Œ ë°˜í™˜ | ë†’ìŒ | **P0** |
| 3 | ê²€ì¦ ì›Œí¬í”Œë¡œìš° ë¯¸ì •ì˜ | PRDì— handoffâ†’verifyâ†’reviewâ†’gate ì—†ìŒ | ë†’ìŒ | **P1** |
| 4 | review ë„êµ¬ ì—†ìŒ | êµ¬í˜„ ì•ˆ ë¨ | ì¤‘ê°„ | **P1** |
| 5 | verify/gate ì‹¤í–‰ ì•ˆ í•¨ | ì•ˆë‚´ë§Œ í•˜ê³  ì‹¤ì œ ì‹¤í–‰ ì•ˆ í•¨ | ì¤‘ê°„ | **P1** |
| 6 | ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ì—†ìŒ | ë™ê¸°í™” íŒŒì¼ ìŒ(license.pyâ†”license_free.py) ì²´í¬ ì•ˆ í•¨ | ë†’ìŒ | **P1** |
| 7 | í…ŒìŠ¤íŠ¸ â‰  ê²€ì¦ | pytest í†µê³¼í•´ë„ ì‹¤ì œ MCP ì‘ë™ í™•ì¸ ì•ˆ í•¨ | ë†’ìŒ | **P0** |

---

### P0: ì¦‰ì‹œ ìˆ˜ì • (ë°°í¬ ì°¨ë‹¨)

#### 1. license_free.py ë™ê¸°í™”
- [x] tier_info, days_since_activation, premium_unlocked ë°˜í™˜ ì¶”ê°€
- [ ] PyPI ë°°í¬í•˜ì—¬ uvx í™˜ê²½ ë°˜ì˜

#### 2. manager ë™ì  íšŒì˜ ìˆ˜ì •
- [ ] pyproject.tomlì— anthropic optional ì¶”ê°€ (ì™„ë£Œ)
- [ ] MCP ì„¤ì • ë¬¸ì„œì— `--with anthropic` ì•ˆë‚´
- [ ] ë™ì  íšŒì˜ ì‹œ í…œí”Œë¦¿ ëŒ€ì‹  ì‹¤ì œ í”¼ë“œë°± ìƒì„± í™•ì¸
- [ ] í† í° ë‚­ë¹„ ì—†ì´ ê´€ë ¨ ìˆëŠ” í”¼ë“œë°±ë§Œ ìƒì„±

#### 3. ì‹¤ì œ MCP ê²€ì¦ ì ˆì°¨ ì¶”ê°€
- [ ] pytest í›„ ë°˜ë“œì‹œ MCP ë„êµ¬ ìˆ˜ë™ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- [ ] ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¬¸ì„œí™”

---

### P1: ê²€ì¦ ì›Œí¬í”Œë¡œìš° ì •ì˜ ë° êµ¬í˜„

#### ê²€ì¦ ì›Œí¬í”Œë¡œìš° (MUST)

```
ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ
    â†“
handoff(feature, decisions, warnings, next_steps)
    â†“
/clear (ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”)
    â†“
verify(path, scope, checklist)  â† ì‹¤ì œ ì²´í¬ ì‹¤í–‰
    â†“
review(path)  â† ë§¤ë‹ˆì €ë“¤ì´ ì½”ë“œ ë¦¬ë·° [NEW]
    â†“
gate(path, steps, fix)  â† ì‹¤ì œ lint/test/build ì‹¤í–‰
    â†“
ì™„ë£Œ
```

#### 4. verify ë„êµ¬ ê°œì„ 
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª© ìë™ ê²€ì¦ (íŒŒì¼ ì¡´ì¬, í•¨ìˆ˜ êµ¬ì¡° ë“±)
- [ ] PASS/FAIL ê²°ê³¼ ë°˜í™˜
- [ ] ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ì • ì œì•ˆ

#### 5. review ë„êµ¬ ì‹ ê·œ êµ¬í˜„
```python
async def review(path: str, scope: str = "feature") -> list[TextContent]:
    """ë§¤ë‹ˆì €ë“¤ì˜ ì½”ë“œ ë¦¬ë·°

    1. ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ ìˆ˜ì§‘
    2. ê° ë§¤ë‹ˆì € ê´€ì ì—ì„œ ë¦¬ë·°
    3. ë¬¸ì œ ë°œê²¬ ì‹œ ìˆ˜ì • ì œì•ˆ
    """
```

#### 6. gate ë„êµ¬ ê°œì„ 
- [ ] ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ (lint, test, build)
- [ ] ê²°ê³¼ ìˆ˜ì§‘ ë° EVIDENCE.md ìë™ ì—…ë°ì´íŠ¸
- [ ] ì „ì²´ PASS ì‹œì—ë§Œ "ì™„ë£Œ" í—ˆìš©

#### 7. ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬ ë„êµ¬
```python
async def check_sync(path: str) -> list[TextContent]:
    """ë™ê¸°í™” í•„ìˆ˜ íŒŒì¼ ìŒ ê²€ì¦

    ì²´í¬ ëŒ€ìƒ:
    - license.py â†” license_free.py
    - server.py â†” server_pro.py (ìˆìœ¼ë©´)
    - messages/en.py â†” messages/ko.py (ìˆìœ¼ë©´)

    ê²€ì¦ í•­ëª©:
    - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ì¼ì¹˜
    - ë°˜í™˜ê°’ êµ¬ì¡° ì¼ì¹˜
    """
```

---

### ì™„ë£Œ ê¸°ì¤€ (DoD)

#### P0 ì™„ë£Œ ì¡°ê±´
- [ ] license_status í˜¸ì¶œ ì‹œ Tierê°€ "Personal" í‘œì‹œ
- [ ] manager(use_dynamic=true) í˜¸ì¶œ ì‹œ context ê´€ë ¨ í”¼ë“œë°± ë°˜í™˜
- [ ] pytest í†µê³¼ + MCP ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í†µê³¼

#### P1 ì™„ë£Œ ì¡°ê±´
- [ ] handoff â†’ verify â†’ review â†’ gate ì›Œí¬í”Œë¡œìš° ì‘ë™
- [ ] verifyê°€ ì‹¤ì œ ê²€ì¦ ìˆ˜í–‰ (ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™ í™•ì¸)
- [ ] reviewê°€ ë§¤ë‹ˆì € ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰
- [ ] gateê°€ ì‹¤ì œ lint/test/build ì‹¤í–‰
- [ ] check_syncê°€ ë™ê¸°í™” ë¶ˆì¼ì¹˜ ê°ì§€

---

### ì˜ˆë°©ì±… (ì¬ë°œ ë°©ì§€)

1. **Stub íŒŒì¼ ìˆ˜ì • ì‹œ ë™ê¸°í™” ì²´í¬ í•„ìˆ˜**
   - Primary íŒŒì¼ ìˆ˜ì • â†’ Stub íŒŒì¼ë„ í™•ì¸
   - CIì— check_sync ì¶”ê°€

2. **í…ŒìŠ¤íŠ¸ í›„ ê²€ì¦ í•„ìˆ˜**
   - pytest í†µê³¼ â‰  ì™„ë£Œ
   - MCP ë„êµ¬ ìˆ˜ë™ í˜¸ì¶œ í…ŒìŠ¤íŠ¸ í•„ìˆ˜

3. **ê²€ì¦ ì›Œí¬í”Œë¡œìš° ê°•ì œ**
   - ê¸°ëŠ¥ ì™„ë£Œ ì‹œ handoff â†’ verify â†’ review â†’ gate ìˆœì„œ ê°•ì œ
   - gate í†µê³¼ ì „ ì»¤ë°‹ ì°¨ë‹¨ (pre-commit hook)

---

## v1.8 ì•„í‚¤í…ì²˜ ê°€ë“œ + ê¸ì •ì  í”„ë ˆì´ë°

> **ë°œê²¬ì¼**: 2026-01-26
> **ê·¼ë³¸ ì›ì¸**: ì•„í‚¤í…ì²˜ ê²°ì • ë¯¸ê¸°ë¡ + ë¶€ì •í˜• ê·œì¹™ì˜ ì—­íš¨ê³¼
> **ì—°êµ¬ ê¸°ë°˜**: Wegner (1987) ì‚¬ê³  ì–µì œ, Anthropic/OpenAI ê³µì‹ ê°€ì´ë“œ

### ë°°ê²½ (ì™œ í•„ìš”í•œê°€)

ì‹¤ì œ ì‚¬ìš© ì‹œ ë°œìƒí•œ ë¬¸ì œ:
- manager ë„êµ¬ 2ê³³ì—ì„œ ë‹¤ë¥´ê²Œ ì •ì˜ë¨ â†’ ì¶©ëŒë¡œ ì‘ì—… ë¶ˆê°€
- ì•„í‚¤í…ì²˜ ê²°ì •ì´ ê¸°ë¡ë˜ì§€ ì•ŠìŒ â†’ ì™œ ì´ë ‡ê²Œ ë˜ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŒ
- "~í•˜ì§€ ë§ˆë¼" ê·œì¹™ â†’ ì¸ê°„/AI ëª¨ë‘ ì—­íš¨ê³¼ (ë¨¼ì € ê¸ˆì§€ ëŒ€ìƒ í™œì„±í™”)

**ê·¼ë³¸ ì›ì¸**:
1. "ì–¸ì œ/ë¬´ì—‡ì„" ê¸°ë¡í•´ì•¼ í•˜ëŠ”ì§€ ë¯¸ì •ì˜
2. ê¸°ì¡´ ì½”ë“œ í™•ì¸ ì—†ì´ ìƒˆ ì½”ë“œ ì¶”ê°€ (ìˆ˜ì •ë³´ë‹¤ ì¶”ê°€ê°€ ì¸ì§€ì ìœ¼ë¡œ ì‰¬ì›€)
3. ê·œì¹™ì´ ë¶€ì •í˜• â†’ Pink Elephant Problem

### A. ì•„í‚¤í…ì²˜ ê°€ë“œ (Pro)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| A1 | `arch_check` ë„êµ¬ | ìƒˆ í•¨ìˆ˜/ëª¨ë“ˆ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ê°•ì œ | P0 |
| A2 | Import ê·œì¹™ ê²€ì¦ | server.pyì˜ ì˜ëª»ëœ import íŒ¨í„´ ê°ì§€ | P0 |
| A3 | ì¤‘ë³µ ì •ì˜ ê°ì§€ | ê°™ì€ í•¨ìˆ˜ëª…ì´ ì—¬ëŸ¬ ê³³ì— ì •ì˜ë˜ë©´ ê²½ê³  | P1 |
| A4 | ì•„í‚¤í…ì²˜ ê²°ì • ê°•ì œ ê¸°ë¡ | íŠ¹ì • íŒŒì¼ ìˆ˜ì • ì‹œ record_decision í˜¸ì¶œ ê°•ì œ | P1 |

#### A1. arch_check ë„êµ¬

```python
async def arch_check(
    name: str,           # ì¶”ê°€í•˜ë ¤ëŠ” í•¨ìˆ˜/í´ë˜ìŠ¤ëª…
    purpose: str,        # ëª©ì  ì„¤ëª…
    path: str = "."      # í”„ë¡œì íŠ¸ ê²½ë¡œ
) -> list[TextContent]:
    """ìƒˆ ì½”ë“œ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ í™•ì¸

    1. Knowledge Baseì—ì„œ ê´€ë ¨ ê²°ì • ê²€ìƒ‰
    2. Grepìœ¼ë¡œ ê°™ì€ ì´ë¦„/ë¹„ìŠ·í•œ ê¸°ëŠ¥ ê²€ìƒ‰
    3. ìˆìœ¼ë©´: "ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ê¶Œì¥" + ìœ„ì¹˜
    4. ì—†ìœ¼ë©´: "ì¶”ê°€ ê°€ëŠ¥" + record_location ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] `arch_check("manager", "ë§¤ë‹ˆì € í”¼ë“œë°±")` í˜¸ì¶œ ì‹œ ê¸°ì¡´ ìœ„ì¹˜ ë°˜í™˜
- [ ] ê¸°ì¡´ ì½”ë“œ ìˆìœ¼ë©´ "ìˆ˜ì • ê¶Œì¥", ì—†ìœ¼ë©´ "ì¶”ê°€ ê°€ëŠ¥"
- [ ] ì¶”ê°€ í›„ record_location í˜¸ì¶œ ì•ˆë‚´

#### A2. Import ê·œì¹™ ê²€ì¦

```python
async def check_imports(path: str) -> list[TextContent]:
    """server.pyì˜ import íŒ¨í„´ ê²€ì¦

    ê·œì¹™ (LOCKED #30):
    - âœ… from .tools import xxx
    - âŒ from .tools.manager import xxx
    - âŒ from .tools.manager.core import xxx

    ìœ„ë°˜ ì‹œ ê²½ê³  + ìˆ˜ì • ë°©ë²• ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] server.py ë¶„ì„í•˜ì—¬ tools/xxx/ ì§ì ‘ import ê°ì§€
- [ ] ìœ„ë°˜ ì‹œ WARN + ì˜¬ë°”ë¥¸ import ë°©ë²• ì•ˆë‚´
- [ ] can_codeì— í†µí•© (ì„ íƒì )

#### A3. ì¤‘ë³µ ì •ì˜ ê°ì§€

```python
async def check_duplicates(path: str) -> list[TextContent]:
    """ê°™ì€ í•¨ìˆ˜ëª…ì´ ì—¬ëŸ¬ ê³³ì— ì •ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸

    1. __init__.pyë“¤ì—ì„œ exportëœ í•¨ìˆ˜ëª… ìˆ˜ì§‘
    2. ê°™ì€ ì´ë¦„ì´ 2ê³³ ì´ìƒì´ë©´ ê²½ê³ 
    3. "ë‹¨ì¼ ìœ„ì¹˜ì—ì„œë§Œ export ê·œì¹™" ì•ˆë‚´
    """
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] tools/__init__.pyì™€ tools/xxx/__init__.pyì˜ export ë¹„êµ
- [ ] ì¤‘ë³µ ë°œê²¬ ì‹œ ê²½ê³  + ì–´ëŠ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì•ˆë‚´

#### A4. ì•„í‚¤í…ì²˜ ê²°ì • ê°•ì œ ê¸°ë¡

```python
# íŠ¸ë¦¬ê±° íŒŒì¼ ëª©ë¡ (CLAUDE.mdì—ë„ ëª…ì‹œ)
ARCH_TRIGGER_FILES = [
    "server.py",
    "tools/__init__.py",
    "**/core.py",
    "license*.py",
    "api_client.py",
]

# ì´ íŒŒì¼ë“¤ ìˆ˜ì • ì‹œ can_codeê°€ record_decision í˜¸ì¶œ ì•ˆë‚´
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] ARCH_TRIGGER_FILES ìˆ˜ì • ì‹œ "ì•„í‚¤í…ì²˜ ê²°ì • ê¸°ë¡ í•„ìš”" ë©”ì‹œì§€
- [ ] record_decision í˜¸ì¶œ ì˜ˆì‹œ ì œê³µ

---

### B. ê¸ì •ì  í”„ë ˆì´ë° ê°€ì´ë“œ (Free)

| # | ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---|------|------|----------|
| B1 | ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ | ë¶€ì •í˜• â†’ ê¸ì •í˜• ë³€í™˜ ì•ˆë‚´ | P1 |
| B2 | CLAUDE.md ê²€ì‚¬ | ë¶€ì •í˜• ê·œì¹™ ê°ì§€ ë° ë³€í™˜ ì œì•ˆ | P2 |
| B3 | Manager í”¼ë“œë°± ê°œì„  | "~í•˜ì§€ ë§ˆë¼" ëŒ€ì‹  "~í•´ë¼"ë¡œ ì¶œë ¥ | P2 |

#### B1. ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ

```python
NEGATIVE_TO_POSITIVE = {
    "ê¸ˆì§€": "ì‚¬ìš©: {}",
    "í•˜ì§€ ë§ˆë¼": "ëŒ€ì‹ : {}",
    "í”¼í•˜ë¼": "ê¶Œì¥: {}",
    "ì•ˆ ë¨": "ë°©ë²•: {}",
}

def convert_rule(negative_rule: str) -> str:
    """ë¶€ì •í˜• ê·œì¹™ì„ ê¸ì •í˜•ìœ¼ë¡œ ë³€í™˜ ì œì•ˆ"""
```

**ì˜ˆì‹œ:**
| ë¶€ì •í˜• | ê¸ì •í˜• |
|--------|--------|
| "ì¤‘ë³µ ì •ì˜ ê¸ˆì§€" | "ê° í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ìœ„ì¹˜ì—ì„œë§Œ export" |
| "ì§ì ‘ import ê¸ˆì§€" | "server.pyëŠ” tools/__init__.pyì—ì„œ import" |
| "ê¸°ë¡ ì•ˆ í•˜ë©´ ì•ˆ ë¨" | "ì•„í‚¤í…ì²˜ ë³€ê²½ ì‹œ record_decision í˜¸ì¶œ" |

#### B2. CLAUDE.md ê²€ì‚¬

```python
async def check_rules_framing(path: str) -> list[TextContent]:
    """CLAUDE.mdì˜ ê·œì¹™ í”„ë ˆì´ë° ê²€ì‚¬

    1. ë¶€ì •í˜• íŒ¨í„´ ê°ì§€ ("ê¸ˆì§€", "í•˜ì§€ ë§ˆ", "ì•ˆ ë¨", "í”¼í•˜")
    2. ê¸ì •í˜• ë³€í™˜ ì œì•ˆ
    3. ì—°êµ¬ ê·¼ê±° ì•ˆë‚´ (Wegner, Anthropic)
    """
```

---

### ì™„ë£Œ ê¸°ì¤€ (DoD)

#### P0 ì™„ë£Œ ì¡°ê±´
- [ ] arch_check í˜¸ì¶œ ì‹œ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ë™ì‘
- [ ] check_imports í˜¸ì¶œ ì‹œ ì˜ëª»ëœ import ê°ì§€
- [ ] í˜„ì¬ manager ì¶©ëŒ ê°ì§€ë¨

#### P1 ì™„ë£Œ ì¡°ê±´
- [ ] check_duplicatesë¡œ ì¤‘ë³µ ì •ì˜ ê°ì§€
- [ ] ARCH_TRIGGER_FILES ìˆ˜ì • ì‹œ ê¸°ë¡ ì•ˆë‚´
- [ ] ê·œì¹™ ë³€í™˜ ê°€ì´ë“œ ì œê³µ

#### P2 ì™„ë£Œ ì¡°ê±´
- [ ] CLAUDE.md ë¶€ì •í˜• ê·œì¹™ ê°ì§€
- [ ] Manager í”¼ë“œë°±ì´ ê¸ì •í˜•ìœ¼ë¡œ ì¶œë ¥

---

### ê¸°ìˆ  ê²°ì • (Knowledge Base ê¸°ë¡ë¨)

| ID | ê²°ì • | ìƒíƒœ |
|----|------|------|
| #30 | server.pyëŠ” tools/__init__.pyì—ì„œë§Œ import | ğŸ”’ LOCKED |
| #31 | Pro ê¸°ëŠ¥: API ê¶Œí•œ â†’ ë¡œì»¬ ì‹¤í–‰ (ship íŒ¨í„´) | ğŸ”’ LOCKED |
| #32 | Manager ì¶©ëŒ: í†µí•© í•„ìš” | âš ï¸ OPEN |
| #37 | íŒŒì¼ êµ¬ì¡°: xxx.py(ì§„ì…ì ), xxx_pro.py(êµ¬í˜„), xxx/(ë‚´ë¶€) | ğŸ”’ LOCKED |
| #38 | ê·œì¹™ì€ ê¸ì •í˜•ìœ¼ë¡œ ì‘ì„± | ğŸ”’ LOCKED |
| #39 | ì•„í‚¤í…ì²˜ ë³€ê²½ ì‹œ record_decision í˜¸ì¶œ | ğŸ”’ LOCKED |
| #40 | ìƒˆ ì½”ë“œ ì¶”ê°€ ì „ ê¸°ì¡´ ì½”ë“œ í™•ì¸ | ğŸ”’ LOCKED |

---

### ì—°êµ¬ ê·¼ê±°

**Wegner (1987)**: "í•˜ì–€ ê³° ìƒê° ë§ˆë¼" â†’ ë” ë§ì´ ìƒê°í•¨ (rebound effect, d â‰ˆ 0.30)

**Anthropic ê³µì‹ ë¬¸ì„œ**:
> "Tell Claude what to do instead of what not to do."
> âŒ "Do not use markdown"
> âœ… "Use smoothly flowing prose paragraphs"

**OpenAI Help Center**:
> "Using negative instructions instead of positive framing" - í”¼í•´ì•¼ í•  ì‹¤ìˆ˜ë¡œ ëª…ì‹œ

**íš¨ê³¼ í¬ê¸°**:
- ê¸ì •í˜• ì§€ì‹œ (implementation intentions): medium-to-large effect
- ë¶€ì •í˜• ì§€ì‹œ (thought suppression): rebound effect (d = 0.30)

---

## v1.9 ë„êµ¬ í†µí•© + Deprecation

> **ì™„ë£Œì¼**: 2026-01-26
> **ëª©í‘œ**: ìœ ì‚¬ ë„êµ¬ í†µí•©, API ë‹¨ìˆœí™”

### ë°°ê²½ (ì™œ í•„ìš”í•œê°€)

MCP ë„êµ¬ ë¶„ì„ ê²°ê³¼:
- 52ê°œ ë„êµ¬ ì¤‘ 9ê°œ ìœ ì‚¬ ê·¸ë£¹ ë°œê²¬
- 5ê°œ ê¸°ëŠ¥ ì¤‘ë³µ (scan_docs â‰ˆ can_code)
- 6ê°œ í†µí•© ê°€ëŠ¥ (get_prd_template â†’ start --template)

### A. Deprecation Warnings

| Deprecated | ëŒ€ì²´ | Migration |
|------------|------|-----------|
| `scan_docs` | `can_code` | `can_code(path)` |
| `analyze_docs` | `can_code` | `can_code(path)` |
| `verify` | `ship` | `ship(path, steps=["lint", "test"])` |
| `gate` | `ship` | `ship(path, steps, auto_fix)` |
| `handoff` | `record_decision` + `update_progress` | ì¡°í•© ì‚¬ìš© |
| `get_prd_template` | `start` | `start(path, template="web-app")` |
| `get_prd_guide` | `start` | `start(path, guide=True)` |
| `init_docs` | `start` | `start(path, init=True)` |
| `init_rules` | `setup_cli` | `setup_cli(path, rules="web")` |
| `hook_design` | `setup_cli` | `setup_cli(path, hook="design")` |
| `hook_verify` | `setup_cli` | `setup_cli(path, hook="verify")` |

### B. ì˜µì…˜ í™•ì¥

#### start ë„êµ¬ í†µí•©

```python
start(
    path: str,
    template: str = None,     # get_prd_template ëŒ€ì²´
    layout: str = "standard", # lite | standard | detailed
    guide: bool = False,      # get_prd_guide ëŒ€ì²´
    init: bool = False,       # init_docs ëŒ€ì²´
    project_type: str = None, # íƒ€ì… ê°•ì œ ì§€ì •
    project_name: str = None
)
```

#### setup_cli ë„êµ¬ í†µí•©

```python
setup_cli(
    path: str,
    level: str = "remind",
    rules: str = None,        # init_rules ëŒ€ì²´: web | api | fullstack | minimal
    hook: str = None,         # hook_design/hook_verify ëŒ€ì²´: design | verify
    hook_trigger: str = None  # pre_code | post_code | pre_commit ë“±
)
```

### C. ì‹ ê·œ ë„êµ¬

| ë„êµ¬ | ì„¤ëª… | ë²„ì „ |
|------|------|------|
| `debug_runtime` | MCP ëŸ°íƒ€ì„ í™˜ê²½ ì§„ë‹¨ | v3.2 |
| `check_sync` | íŒŒì¼ ìŒ ë™ê¸°í™” ê²€ì¦ | v3.1 |

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [x] 11ê°œ ë„êµ¬ì— deprecation warning ì¶”ê°€
- [x] `start --template/--guide/--init` ì˜µì…˜ ë™ì‘
- [x] `setup_cli --rules/--hook` ì˜µì…˜ ë™ì‘
- [x] README.md ì—…ë°ì´íŠ¸
- [x] CLAUDE.mdì— migration guide ì¶”ê°€

---

## v3.1 ëŸ°íƒ€ì„ ì•ˆì „ì¥ì¹˜

> **ì™„ë£Œì¼**: 2026-01-27
> **ëª©í‘œ**: ì‚¬ì´ë“œì´í™íŠ¸ ì²´í¬, ìƒì—…ìš© ì•ˆì „ì¥ì¹˜

### A. check_sync ë„êµ¬

íŒŒì¼ ìŒ ë™ê¸°í™” ê²€ì¦:
- `license.py` â†” `license_free.py`: í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜
- `messages/en.py` â†” `messages/ko.py`: ë©”ì‹œì§€ í‚¤

### B. ship ì•ˆì „ì¥ì¹˜ (Pro)

```python
_run_safety_checks():
    - ì‹œí¬ë¦¿ íŒŒì¼ íƒì§€ (.env, *.key, *.pem)
    - ì‹œí¬ë¦¿ íŒ¨í„´ íƒì§€ (API key, password)
    - .env.example ì¡´ì¬ í™•ì¸
    - git ì¶”ì  ì‹œí¬ë¦¿ â†’ BLOCK
```

### C. PRD Diff + ì˜í–¥ ë¶„ì„

save_prd ì‹œ:
- ì´ì „ PRD ë°±ì—… (`.claude/prd_history/`)
- ë³€ê²½ ë‚´ìš© ë¶„ì„ (ì¶”ê°€/ì‚­ì œ ë¼ì¸)
- ì˜í–¥ë°›ëŠ” íŒŒì¼ ê²€ìƒ‰

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [x] check_sync ë„êµ¬ êµ¬í˜„
- [x] ship ì•ˆì „ì¥ì¹˜ êµ¬í˜„
- [x] save_prd diff ë¶„ì„ êµ¬í˜„

---

## v3.2 MCP ëŸ°íƒ€ì„ ë””ë²„ê·¸

> **ì™„ë£Œì¼**: 2026-01-27
> **ëª©í‘œ**: MCP í™˜ê²½ ì§„ë‹¨ ë„êµ¬

### debug_runtime ë„êµ¬

```python
debug_runtime(project_path: str = None):
    - sys.executable ì¶œë ¥
    - clouvel.__file__ ì¶œë ¥
    - is_developer() ê²°ê³¼
    - can_use_pro() ê²°ê³¼
    - í™˜ê²½ ë³€ìˆ˜ (CLOUVEL_DEV ë“±)
```

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [x] debug_runtime ë„êµ¬ êµ¬í˜„
- [x] server.pyì— ë“±ë¡
- [x] MCP ì¬ì‹œì‘ í›„ í…ŒìŠ¤íŠ¸ í†µê³¼

---

## í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê°•í™”

> **ì™„ë£Œì¼**: 2026-01-27
> **ëª©í‘œ**: P0 í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„±

### ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸ íŒŒì¼

| íŒŒì¼ | í…ŒìŠ¤íŠ¸ ìˆ˜ | ë‚´ìš© |
|------|----------|------|
| `test_knowledge.py` | 35 | Knowledge Base ì „ì²´ |
| `test_ship.py` | 23 | Ship ë„êµ¬ ì „ì²´ |

### ì „ì²´ í…ŒìŠ¤íŠ¸ í˜„í™©

```
234 passed, 7 skipped
```

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [x] test_knowledge.py ì‘ì„± (20+ í…ŒìŠ¤íŠ¸)
- [x] test_ship.py ì‘ì„± (15+ í…ŒìŠ¤íŠ¸)
- [x] ì „ì²´ í…ŒìŠ¤íŠ¸ í†µê³¼

---

## v1.10 Review ë„êµ¬ (Pro)

> **ìƒíƒœ**: ì„¤ê³„ ì™„ë£Œ
> **ìš°ì„ ìˆœìœ„**: P1
> **ë‹´ë‹¹**: PM

### ë°°ê²½

í˜„ì¬ ì›Œí¬í”Œë¡œìš°: `handoff â†’ verify â†’ gate`

**ë¬¸ì œ**: ì½”ë“œ ë¦¬ë·° ë‹¨ê³„ ëˆ„ë½. ship ì „ì— ë§¤ë‹ˆì € ê´€ì  ê²€í† ê°€ ì—†ìŒ.

### ì œì•ˆ ì›Œí¬í”Œë¡œìš°

```
handoff â†’ review â†’ verify â†’ gate â†’ ship
```

### API ì„¤ê³„

```python
@mcp_tool
async def review(
    path: str,
    scope: str = "feature",  # file | feature | full
    managers: list[str] = None,  # íŠ¹ì • ë§¤ë‹ˆì €ë§Œ (ê¸°ë³¸: auto)
    base_branch: str = "main"  # diff ê¸°ì¤€ ë¸Œëœì¹˜
) -> list[TextContent]:
    """ë§¤ë‹ˆì €ë“¤ì˜ ì½”ë“œ ë¦¬ë·°

    1. git diffë¡œ ë³€ê²½ íŒŒì¼ ìˆ˜ì§‘
    2. ë³€ê²½ ì½”ë“œ ë¶„ì„
    3. ë§¤ë‹ˆì €ë³„ ê´€ì ì—ì„œ ë¦¬ë·°
    4. ì´ìŠˆ ë° ìˆ˜ì • ì œì•ˆ ë°˜í™˜
    """
```

### ì‘ë‹µ í˜•ì‹

```markdown
## ğŸ” Code Review

**Scope**: feature (login-auth)
**Files**: 5 changed (+234 -45)

### ğŸ‘” PM Review
- âœ… PRD ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
- âš ï¸ ì—ëŸ¬ ë©”ì‹œì§€ ì‚¬ìš©ì ì¹œí™”ì ì´ì§€ ì•ŠìŒ (line 45)

### ğŸ”§ CTO Review
- âœ… ì•„í‚¤í…ì²˜ íŒ¨í„´ ì¤€ìˆ˜
- âŒ N+1 ì¿¼ë¦¬ ë°œê²¬ (user_service.py:78)
  ```suggestion
  # Before
  for user in users:
      profile = get_profile(user.id)

  # After
  profiles = get_profiles_batch([u.id for u in users])
  ```

### ğŸ”’ CSO Review
- âš ï¸ ì…ë ¥ ê²€ì¦ ëˆ„ë½ (auth.py:23)
- âŒ SQL ì¸ì ì…˜ ìœ„í—˜ (query.py:56)

### ğŸ“Š Summary
| Manager | Pass | Warn | Fail |
|---------|------|------|------|
| PM | 3 | 1 | 0 |
| CTO | 2 | 0 | 1 |
| CSO | 1 | 1 | 1 |

**Verdict**: âš ï¸ 2 issues must be fixed before ship
```

### ë§¤ë‹ˆì €ë³„ ë¦¬ë·° ê´€ì 

| ë§¤ë‹ˆì € | ë¦¬ë·° ê´€ì  |
|--------|----------|
| PM | PRD ì¶©ì¡±, ê¸°ëŠ¥ ì™„ì„±ë„, UX |
| CTO | ì•„í‚¤í…ì²˜, ì„±ëŠ¥, ì½”ë“œ í’ˆì§ˆ |
| QA | í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ì—£ì§€ ì¼€ì´ìŠ¤ |
| CSO | ë³´ì•ˆ ì·¨ì•½ì , ì¸ì¦/ì¸ê°€ |
| CFO | ë¹„ìš© ì˜í–¥ (API í˜¸ì¶œ, ë¦¬ì†ŒìŠ¤) |
| CDO | UI/UX ì¼ê´€ì„± |

### êµ¬í˜„ ê³„íš

| Phase | ë‚´ìš© | ì˜ˆìƒ |
|-------|------|------|
| 1 | git diff íŒŒì‹± + íŒŒì¼ ìˆ˜ì§‘ | 2h |
| 2 | ë§¤ë‹ˆì €ë³„ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ | 3h |
| 3 | Worker API ì—°ë™ | 2h |
| 4 | ì‘ë‹µ í¬ë§·í„° | 2h |
| 5 | í…ŒìŠ¤íŠ¸ | 2h |

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [ ] `review` ë„êµ¬ MCP ë“±ë¡
- [ ] git diff ê¸°ë°˜ ë³€ê²½ íŒŒì¼ ìˆ˜ì§‘
- [ ] ë§¤ë‹ˆì €ë³„ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì‘ì„±
- [ ] Worker API ë˜ëŠ” ë¡œì»¬ ì‹¤í–‰ ì§€ì›
- [ ] test_review.py 10+ í…ŒìŠ¤íŠ¸
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## v2.0: Proactive MCP (ëŠ¥ë™ì  MCP)

> **ìƒíƒœ**: ê³„íš ë‹¨ê³„
> **ëª©í‘œ**: ìˆ˜ë™ â†’ ëŠ¥ë™ ì „í™˜. ì‚¬ìš©ìê°€ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì²´í¬/ì•Œë¦¼

### ë°°ê²½

í˜„ì¬ Clouvelì€ **ìˆ˜ë™ì ** MCP ì„œë²„:
- ì‚¬ìš©ìê°€ `can_code` í˜¸ì¶œí•´ì•¼ PRD ì²´í¬
- ì‚¬ìš©ìê°€ `ship` í˜¸ì¶œí•´ì•¼ ê²€ì¦ ì‹¤í–‰
- ì‚¬ìš©ìê°€ ìŠìœ¼ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ í•¨

**ë¬¸ì œì **:
- ê·œì¹™ì„ ì•Œì•„ë„ ê¹Œë¨¹ìœ¼ë©´ ë¬´ìš©ì§€ë¬¼
- ì»¨í…ìŠ¤íŠ¸ ë“œë¦¬í”„íŠ¸ (ì›ë˜ ëª©í‘œì—ì„œ ë²—ì–´ë‚¨) ê°ì§€ ë¶ˆê°€
- ê°™ì€ ì‹¤ìˆ˜ ë°˜ë³µ

### í•µì‹¬ ê¸°ëŠ¥

| ê¸°ëŠ¥ | íŠ¸ë¦¬ê±° | ë™ì‘ | ìš°ì„ ìˆœìœ„ |
|------|--------|------|----------|
| **ìë™ PRD ì²´í¬** | Edit/Write ë„êµ¬ í˜¸ì¶œ ì „ | can_code ìë™ ì‹¤í–‰, BLOCKì´ë©´ ì°¨ë‹¨ | P0 |
| **ì»¨í…ìŠ¤íŠ¸ ë“œë¦¬í”„íŠ¸ ê°ì§€** | 5íšŒ ë„êµ¬ í˜¸ì¶œë§ˆë‹¤ | í˜„ì¬ ì‘ì—… vs ì›ë˜ ëª©í‘œ ë¹„êµ | P0 |
| **ì—ëŸ¬ íŒ¨í„´ ê°ì§€** | ê°™ì€ ì—ëŸ¬ 3íšŒ ë°œìƒ | ìë™ ê²½ê³  + error_record ì œì•ˆ | P1 |
| **ì§„í–‰ ë¦¬ë§ˆì¸ë“œ** | 30ë¶„ ê²½ê³¼ | current.md ì—…ë°ì´íŠ¸ ë¦¬ë§ˆì¸ë“œ | P2 |
| **ì»¤ë°‹ ì „ ê²€ì¦** | git commit ê°ì§€ | ship ìë™ ì‹¤í–‰ ì œì•ˆ | P2 |

### ê¸°ìˆ  êµ¬í˜„

#### Claude Code Hooks í™œìš©

```yaml
# .claude/settings.local.json
{
  "hooks": {
    "pre_tool_use": [
      {
        "matcher": "Edit|Write",
        "command": "clouvel can_code --silent"
      }
    ],
    "post_tool_use": [
      {
        "matcher": "*",
        "command": "clouvel drift_check --silent"
      }
    ]
  }
}
```

#### ì•„í‚¤í…ì²˜

```
User Request
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude Code                         â”‚
â”‚   â”œâ”€â”€ pre_tool_use hook             â”‚
â”‚   â”‚     â””â”€â”€ clouvel can_code        â”‚
â”‚   â”‚           â”œâ”€â”€ PASS â†’ ì§„í–‰       â”‚
â”‚   â”‚           â””â”€â”€ BLOCK â†’ ì¤‘ë‹¨      â”‚
â”‚   â”‚                                 â”‚
â”‚   â”œâ”€â”€ Tool Execution (Edit/Write)   â”‚
â”‚   â”‚                                 â”‚
â”‚   â””â”€â”€ post_tool_use hook            â”‚
â”‚         â””â”€â”€ clouvel drift_check     â”‚
â”‚               â”œâ”€â”€ OK â†’ ì§„í–‰         â”‚
â”‚               â””â”€â”€ DRIFT â†’ ê²½ê³       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹ ê·œ ë„êµ¬

| ë„êµ¬ | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `drift_check` | ì»¨í…ìŠ¤íŠ¸ ë“œë¦¬í”„íŠ¸ ê°ì§€ | `path`, `silent` |
| `auto_remind` | ì§„í–‰ ë¦¬ë§ˆì¸ë“œ ì„¤ì • | `interval`, `enabled` |
| `pattern_watch` | ì—ëŸ¬ íŒ¨í„´ ê°ì‹œ | `threshold`, `patterns` |

### drift_check êµ¬í˜„

```python
def drift_check(path: str, silent: bool = False) -> dict:
    """
    í˜„ì¬ ì‘ì—…ì´ ì›ë˜ ëª©í‘œì—ì„œ ë²—ì–´ë‚¬ëŠ”ì§€ ê°ì§€

    1. .claude/planning/task_plan.mdì—ì„œ ì›ë˜ ëª©í‘œ ë¡œë“œ
    2. ìµœê·¼ 5ê°œ ë„êµ¬ í˜¸ì¶œ ë¶„ì„
    3. ëª©í‘œ vs ì‹¤ì œ ì‘ì—… ë¹„êµ
    4. ë“œë¦¬í”„íŠ¸ ì ìˆ˜ ê³„ì‚° (0-100)
    5. 50 ì´ìƒì´ë©´ ê²½ê³ 
    """
    original_goals = load_goals(path)
    recent_actions = get_recent_tool_calls(5)
    drift_score = calculate_drift(original_goals, recent_actions)

    if drift_score > 50:
        return {
            "status": "DRIFT",
            "score": drift_score,
            "original_goal": original_goals[0],
            "current_action": recent_actions[-1],
            "suggestion": "ëª©í‘œë¡œ ëŒì•„ê°€ì„¸ìš”"
        }
    return {"status": "OK", "score": drift_score}
```

### ì•Œë¦¼ ë°©ì‹

| ë ˆë²¨ | í‘œì‹œ | ì˜ˆì‹œ |
|------|------|------|
| **INFO** | ë¡œê·¸ë§Œ | "PRD ì²´í¬ í†µê³¼" |
| **WARN** | ì¸ë¼ì¸ ê²½ê³  | "âš ï¸ ë“œë¦¬í”„íŠ¸ ê°ì§€: ì›ë˜ ëª©í‘œëŠ” Xì˜€ëŠ”ë° ì§€ê¸ˆ Y í•˜ëŠ” ì¤‘" |
| **BLOCK** | ì‘ì—… ì¤‘ë‹¨ | "ğŸš« PRD ì—†ìŒ. ì½”ë”© ë¶ˆê°€." |

### ì„¤ì • ì˜µì…˜

```yaml
# .clouvel/config.yaml
proactive:
  enabled: true

  auto_prd_check:
    enabled: true
    on_block: "stop"  # stop | warn | log

  drift_detection:
    enabled: true
    threshold: 50
    check_interval: 5  # ë§¤ 5íšŒ ë„êµ¬ í˜¸ì¶œë§ˆë‹¤

  error_pattern:
    enabled: true
    threshold: 3  # ê°™ì€ ì—ëŸ¬ 3íšŒ

  reminder:
    enabled: false
    interval: 30  # ë¶„
```

### ì™„ë£Œ ê¸°ì¤€ (DoD)

- [ ] `drift_check` ë„êµ¬ êµ¬í˜„
- [ ] `auto_remind` ë„êµ¬ êµ¬í˜„
- [ ] `pattern_watch` ë„êµ¬ êµ¬í˜„
- [ ] Claude Code hooks ì—°ë™ ê°€ì´ë“œ
- [ ] ì„¤ì • íŒŒì¼ ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] test_proactive.py 20+ í…ŒìŠ¤íŠ¸
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

### êµ¬í˜„ ê³„íš

| Phase | ë‚´ìš© | ì˜ˆìƒ |
|-------|------|------|
| 1 | drift_check í•µì‹¬ ë¡œì§ | 4h |
| 2 | hooks ì—°ë™ í…ŒìŠ¤íŠ¸ | 2h |
| 3 | ì„¤ì • íŒŒì¼ íŒŒì‹± | 2h |
| 4 | pattern_watch êµ¬í˜„ | 3h |
| 5 | auto_remind êµ¬í˜„ | 2h |
| 6 | í†µí•© í…ŒìŠ¤íŠ¸ | 3h |

### ë§ˆì¼€íŒ… ë©”ì‹œì§€

**Before**: "PRD ì²´í¬í•´ì•¼ í•˜ëŠ”ë° ë§¨ë‚  ê¹Œë¨¹ì–´ìš”"
**After**: "ì´ì œ ìë™ìœ¼ë¡œ ì²´í¬í•´ì¤˜ìš”. ê¹Œë¨¹ì–´ë„ OK"

**One-liner**: "Clouvelì´ ì§€ì¼œë³´ê³  ìˆì–´ìš”"

### ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ì˜í–¥ | ì™„í™” |
|--------|------|------|
| ë„ˆë¬´ ì¦ì€ ì•Œë¦¼ | UX ë°©í•´ | ì„¤ì •ìœ¼ë¡œ ì¡°ì ˆ ê°€ëŠ¥ |
| ì˜¤íƒ (false positive) | ì‹ ë¢°ë„ í•˜ë½ | threshold íŠœë‹ |
| ì„±ëŠ¥ ì €í•˜ | ì‘ë‹µ ì§€ì—° | ë¹„ë™ê¸° ì²˜ë¦¬, ìºì‹± |

### ì˜ì¡´ì„±

- Claude Code hooks API (í˜„ì¬ ì§€ì› í™•ì¸ í•„ìš”)
- MCP streaming ì§€ì› (ì•Œë¦¼ìš©)
