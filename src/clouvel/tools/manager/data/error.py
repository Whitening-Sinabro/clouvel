# ERROR Manager Data
# Error Manager

ERROR_DATA = {'emoji': 'üî•', 'title': 'Error Manager', 'focus': ['Error Patterns', '5 Whys', 'NEVER/ALWAYS Rules', 'Prevention', 'Recurrence Prevention'], 'keywords': ['error', 'exception', 'bug', 'crash', 'fail', 'catch', 'try', 'throw', 'debug', 'log', 'trace', 'fix'], 'questions': ['Has a similar error occurred before?', 'What is the Root Cause of this error?', 'Is a prevention rule needed?', 'Is error logging appropriate?', 'What is the recovery strategy?'], 'opinions': {'error': "@QA Bug fixes should start with 5 Whys to find root cause:\n‚Ä¢ **5 Whys Analysis**:\n  1. Why did error occur? ‚Üí Direct cause\n  2. Why that cause? ‚Üí One level deeper\n  3. Why? ‚Üí ...\n  4. Why? ‚Üí ...\n  5. Why? ‚Üí Root Cause (real cause)\n‚Ä¢ **After fix, must**:\n  - Add regression test case\n  - Document NEVER/ALWAYS rules\n  - Search all similar code and fix same patterns\n‚Ä¢ File: Record error history in docs/ERRORS.md", 'auth': "Auth error handling guide:\n‚Ä¢ **Clear messages**: 'Server error' ‚ùå ‚Üí 'Email or password is incorrect' ‚úÖ\n‚Ä¢ **Security note**: Non-existent accounts also show 'incorrect' (prevent account enumeration)\n‚Ä¢ **Error code system**:\n  - AUTH_001: Invalid credentials\n  - AUTH_002: Token expired\n  - AUTH_003: No permission\n  - AUTH_004: Account locked\n‚Ä¢ **Recovery strategy**: Auto refresh on token expiry, redirect to login on failure\n‚Ä¢ Files: src/lib/errors/auth.ts, src/constants/errorCodes.ts", 'api': "API error response standardization:\n‚Ä¢ **Unified response format**:\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_001\",\n    \"message\": \"Invalid email format\",\n    \"field\": \"email\",\n    \"hint\": \"Use format: example@domain.com\"\n  }\n}\n```\n‚Ä¢ **HTTP status codes**:\n  - 400: Client request error (validation failed)\n  - 401: Authentication required\n  - 403: No permission\n  - 404: Resource not found\n  - 500: Server error (logging required, hide details)\n‚Ä¢ **Logging**: Auto-collect 500 errors with Sentry/LogRocket\n‚Ä¢ Files: src/lib/errors/api.ts, src/lib/errorHandler.ts", 'payment': "@CFO Payment errors directly affect money:\n‚Ä¢ **Retry strategy**:\n  - Network error: Max 3 auto-retries (exponential backoff)\n  - Card declined: No retry, suggest alternative payment\n  - Insufficient funds: No retry, verify amount\n‚Ä¢ **Failure notifications**:\n  - User: Display immediately + send email\n  - Ops team: Slack alert (for large amounts)\n‚Ä¢ **Manual handling process**:\n  - Store payment failure logs\n  - Enable retry/refund from admin dashboard\n‚Ä¢ **Idempotency**: Prevent duplicate payment processing\n‚Ä¢ Files: src/lib/payment/errorHandler.ts, src/app/admin/payments/", 'feature': "New feature error handling requirements:\n‚Ä¢ **Wrap with try-catch**: External API calls, DB queries, file operations\n‚Ä¢ **Define fallbacks**:\n  - Data load failure ‚Üí Show cached data or empty state UI\n  - External service outage ‚Üí Graceful degradation\n‚Ä¢ **User feedback**:\n  - Loading: Skeleton UI\n  - Error: 'Retry' button + specific message\n  - Recovered: Toast on successful auto-retry\n‚Ä¢ **Logging**: Include context on error (userId, action, params)\n```typescript\ntry {\n  await doSomething();\n} catch (error) {\n  logger.error('doSomething failed', { userId, action, error });\n  throw new AppError('FEATURE_001', 'Operation failed');\n}\n```\n‚Ä¢ Files: src/lib/errors/index.ts", 'ui': "@CDO UI error state handling:\n‚Ä¢ **Error boundary**: Prevent crashes with React Error Boundary\n```tsx\n<ErrorBoundary fallback={<ErrorFallback />}>\n  <MyComponent />\n</ErrorBoundary>\n```\n‚Ä¢ **State-based UI**:\n  - Loading: Skeleton or spinner\n  - Empty: Guide message + CTA\n  - Error: Error message + retry button\n  - Partial error: Show available data, error only failed parts\n‚Ä¢ **Form errors**: Inline display (below field), summary after submit (top)\n‚Ä¢ **Toast**: Success/failure alerts, auto-dismiss after 3 seconds\n‚Ä¢ Files: src/components/ErrorBoundary.tsx, src/hooks/useAsyncData.ts", 'database': "DB error handling and recovery:\n‚Ä¢ **Transactions**: Wrap multiple operations for atomicity\n```typescript\nawait prisma.$transaction(async (tx) => {\n  await tx.order.create(data);\n  await tx.inventory.decrement(itemId);\n});\n```\n‚Ä¢ **Retry**: 3 retries for temporary DB connection errors\n‚Ä¢ **Deadlock**: Consistent transaction order, implement retry logic\n‚Ä¢ **Migration rollback**: Auto-run down migration on failure\n‚Ä¢ **Logging**: Log slow queries (>1 sec), store error queries\n‚Ä¢ Files: src/lib/db/transaction.ts, prisma/migrations/", 'performance': "Performance-related error handling:\n‚Ä¢ **Timeout**: API 30 sec, DB query 10 sec limits\n```typescript\nconst controller = new AbortController();\nsetTimeout(() => controller.abort(), 30000);\n```\n‚Ä¢ **Rate limit exceeded**: 429 response + Retry-After header\n‚Ä¢ **Memory exhaustion**: Streaming/pagination for large data\n‚Ä¢ **Circuit breaker**: Temporarily block external service on repeated failures\n‚Ä¢ Monitoring: Alert when error rate exceeds 5% (Datadog, Sentry)", 'launch': "Pre-launch error handling check:\n‚Ä¢ [ ] try-catch on all APIs\n‚Ä¢ [ ] Error boundaries configured\n‚Ä¢ [ ] Sentry/LogRocket integration\n‚Ä¢ [ ] Error alert channels set (Slack/email)\n‚Ä¢ [ ] Error response SOP documented\n‚Ä¢ [ ] Rollback scripts ready\n‚Ä¢ [ ] Emergency contacts documented\n‚Ä¢ Files: docs/INCIDENT_RESPONSE.md, scripts/rollback.sh", 'default': "Error handling principles:\n‚Ä¢ **Logging**: Log all errors (severity, timestamp, context)\n‚Ä¢ **Recovery strategy**: Define recovery method per error type\n‚Ä¢ **Monitoring**: Error rate dashboard, alert configuration\n‚Ä¢ **Documentation**: Record errors + solutions\n‚Ä¢ **Prevention**: Add tests/rules to prevent same errors\n‚Ä¢ **5 Whys**: Solve root cause, not surface symptoms"}, 'checklist': ['Implement error logging', 'Error recovery strategy', '5 Whys analysis', 'Add NEVER/ALWAYS rules', 'Set up monitoring'], 'analysis_template': '\n### üî• Error Analysis (5 Whys)\n\n**Problem**: {problem}\n\n1. Why? ‚Üí\n2. Why? ‚Üí\n3. Why? ‚Üí\n4. Why? ‚Üí\n5. Why? ‚Üí (Root Cause)\n\n**Prevention Rules**:\n- NEVER:\n- ALWAYS:\n', 'action_templates': [{'trigger': 'error|bug|exception', 'actions': [{'id': 'err-1', 'action': 'Reproduce error and collect logs', 'depends': [], 'verify': 'Error reproducible', 'phase': 'Prepare'}, {'id': 'err-2', 'action': 'Conduct 5 Whys analysis', 'depends': ['err-1'], 'verify': 'Root Cause identified', 'phase': 'Design'}, {'id': 'err-3', 'action': 'Define NEVER/ALWAYS rules', 'depends': ['err-2'], 'verify': 'Prevention rules documented', 'phase': 'Design'}, {'id': 'err-4', 'action': 'Implement error recovery strategy', 'depends': ['err-2'], 'verify': 'Recovery strategy implemented', 'phase': 'Implement'}, {'id': 'err-5', 'action': 'Set up error logging and monitoring', 'depends': [], 'verify': 'Monitoring configured', 'phase': 'Verify'}]}]}
